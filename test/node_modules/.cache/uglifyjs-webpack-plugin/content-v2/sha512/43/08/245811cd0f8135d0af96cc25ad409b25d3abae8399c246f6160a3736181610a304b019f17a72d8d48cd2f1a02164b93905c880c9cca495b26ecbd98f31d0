{"code":"webpackJsonp([10],{1309:function(e,t,l){var s=l(91)(l(1897),l(1898),function(e){l(1896)},null,null);e.exports=s.exports},1328:function(e,t,l){var s=l(91)(l(1330),l(1331),function(e){l(1329)},null,null);e.exports=s.exports},1329:function(e,t){},1330:function(e,t,l){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={props:[\"projectDetailInfo\"],data:function(){return{showIndex:2,selectitem:null,allMilestoneData:[],allFollow:[],selectFollowIndex:0}},mounted:function(){},methods:{initAllMilestone:function(){var e=new Date,t=e.getFullYear();e.getMonth(),e.getDate();this.allMilestoneData=this.projectDetailInfo.milestones;for(var l=new Date(t+\"-1-1\").getTime(),s=(new Date).getTime(),a=111e11,o=null,i=0;i<this.allMilestoneData.length;i++){var r=(u=this.allMilestoneData[i]).milestoneBeginDate,n=u.milestoneEndDate,c=new Date(r).getTime(),m=new Date(n).getTime(),g=(m-l)/31536e6*100;this.allMilestoneData[i].left=g+\"%\";var f=(m-c)/31536e6;this.allMilestoneData[i].widthScale=f,this.allMilestoneData[i].bindLeft=g-100*f+\"%\",console.log(this.allMilestoneData[i].left),m>s&&m<a&&(o=i,a=m),this.stoneClick(o)}this.allFollow=this.projectDetailInfo.bigFollows;for(i=0;i<this.allFollow.length;i++){var u,d=(u=this.allFollow[i].follow[0]).followTime;g=(new Date(d).getTime()-l)/31536e6*100;this.allFollow[i].left=g+\"%\",console.log(this.allFollow[i].left)}this.selectFollowIndex=this.allFollow.length-1,this.followClick(this.selectFollowIndex),this.$forceUpdate()},changeSelect:function(e){this.selectitem=this.allMilestoneData[e]},stoneClick:function(e){console.log(\"stoneClick\"+e),this.$emit(\"stoneClick\",e),this.selectitem=this.allMilestoneData[e]},followClick:function(e){console.log(\"followClick\"+e),this.$emit(\"followClick\",e),this.selectFollowIndex=e},dealNum:function(e){var t=\"\";switch(e){case 0:t=\"一\";break;case 1:t=\"二\";break;case 2:t=\"三\";break;case 3:t=\"四\";break;case 4:t=\"五\";break;case 5:t=\"六\";break;case 6:t=\"七\";break;case 7:t=\"八\";break;case 8:t=\"九\";break;default:t=\"\"}return t}}}},1331:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"time-base\"},[l(\"div\",{staticClass:\"time_line_box\"},[l(\"div\",{staticClass:\"time_line\",staticStyle:{width:\"90%\"}},[e._m(0),e._v(\" \"),l(\"ol\",{staticStyle:{\"margin-top\":\"60px\"}},e._l(e.allFollow,function(t,s){return l(\"li\",{on:{click:function(t){return e.followClick(s)}}},[l(\"a\",{staticClass:\"follow_item\",class:{follow_item_select:s==e.selectFollowIndex},style:{left:t.left}},[l(\"span\",{staticClass:\"fellowText\"},[e._v(\"跟进\"+e._s(e.dealNum(s)))])])])}),0),e._v(\" \"),l(\"div\",e._l(e.allMilestoneData,function(t,s){return l(\"span\",{key:s,staticClass:\"milestoneLine\",style:{left:t.left},on:{click:function(t){return e.stoneClick(s)}}},[l(\"span\",{staticClass:\"milestoneText\"},[e._v(\"子事项\"+e._s(s+1))]),e._v(\" \"),l(\"span\",{staticClass:\"milestoneCude\"})])}),0),e._v(\" \"),e.selectitem?l(\"span\",{staticClass:\"filling_line2\",style:{left:e.selectitem.bindLeft,transform:\"scaleX(\"+e.selectitem.widthScale+\")\"}}):e._e()])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"ol\",[l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"0%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"1月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"8.49%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"2月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"16.16%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"3月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"24.65%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"4月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"32.87%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"5月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"41.36%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"6月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"49.58%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"7月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"58.08%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"8月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"66.57%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"9月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"74.79%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"10月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"83.28%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"11月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"91.50%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"12月\")])])]),e._v(\" \"),l(\"li\",[l(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"100.0%\"}},[l(\"span\",{staticClass:\"monthText\"},[e._v(\"2020年\")])])])])}]}},1896:function(e,t){},1897:function(e,t,l){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=o(l(137)),a=o(l(1328));function o(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{orgInfo:{orgTypeName:\"\"},personInfo:{},currentPage:1,pageSize:10,pageSizes:[10,20,30],total:0,jmOrgList:[],searchKey:\"\",restaurants:[],addJmOrgFormVisible:!1,formLabelWidth:\"150px\",deleteJmOrgDialogVisible:!1,deleteOrgId:null,rules:{orgName:[{required:!0,message:\"请输入公司名称\",trigger:\"blur\"}],orgNameAbbr:[{required:!0,message:\"请输入公司简称\",trigger:\"blur\"}],orgType:[{required:!0,message:\"请选择分类\",trigger:\"blur\"}]}}},watch:{titleFlag:function(){this.show=this.titleFlag}},computed:{},components:{timeBase:a.default},mounted:function(){this.getJmOrgList()},methods:{querySearch:function(e,t){var l=this.restaurants;t(e?l.filter(this.createFilter(e)):l)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},searchPersonInfo:function(e){this.searchKey=e,this.getJmOrgList()},getJmOrgList:function(){var e=this,t={searchKey:this.searchKey};this.$httpExt().post(\"/jmOrgInfo/getOrgInfoByOrgName\",t).then(function(t){var l=t.result;null!=l&&void 0!=l&&0!=l.length?e.jmOrgList=l:e.jmOrgList=[]}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},toJmOrgDetail:function(e){this.$store.commit(\"setJmOrgId\",e),this.$emit(\"page\",\"个人中心\",\"dynamic_jmOrgDetail\")},editOrgStatus:function(e){var t=this,l=e.jmOrgId,a=e.isEnabled;if(e=void 0==a||void 0==l)this.$message({message:\"参数缺失\",type:\"error\"});else{var o={jmOrgId:l,isEnabled:1==a?0:1};this.$httpExt().post(\"/jmOrgInfo/modifyOrgInfo\",o).then(function(e){var l=e.result;null!=l&&void 0!=l&&1==l?t.$message({message:1==a?\"注销成功\":\"激活成功\",type:\"success\"}):t.$message({message:e.msg,type:\"warning\"}),t.getJmOrgList()}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})}},deleteJmOrgDialog:function(e){this.deleteOrgId=e.jmOrgId,this.deleteJmOrgDialogVisible=!0},deleteJmOrg:function(){var e=this,t={jmOrgId:this.deleteOrgId};this.$httpExt().post(\"/jmOrgInfo/deleteJmOrg\",t).then(function(t){var l=t.result;null!=l&&void 0!=l&&1==l?e.$message({message:\"删除成功\",type:\"success\"}):e.$message({message:t.msg,type:\"warning\"}),e.getJmOrgList(),e.deleteJmOrgDialogVisible=!1}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},addJmOrgDialog:function(){this.addJmOrgFormVisible=!0},addJmOrg:function(){var e=this;this.$refs.orgInfo.validate(function(t){t&&e.$httpExt().post(\"jmOrgInfo/addJmOrg\",e.orgInfo).then(function(t){\"ok\"==t.succ?(e.$message({message:\"添加成功\",type:\"success\"}),e.resetForm(),e.addJmOrgFormVisible=!1,e.getJmOrgList()):e.$message({message:t.msg,type:\"warning\"})}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})})},resetForm:function(){this.addJmOrgFormVisible=!1,this.$refs.orgInfo.resetFields()},selectOrgTypeChange:function(){this.selectOrgType=this.orgInfo.orgType;for(var e=this.$dicTool().getListKeyName(\"grmt_setting.jmOrgType\"),t=0;t<e.length;t++){var l=e[t];if(this.selectOrgType==l.dicKey){this.orgInfo.orgTypeName=l.dicName;break}}}}}},1898:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"overallPlanning\"},[l(\"div\",{staticClass:\"container\"},[e._m(0),e._v(\" \"),l(\"div\",{staticClass:\"headInfo\"},[l(\"div\",{staticClass:\"contact-btn\"},[l(\"el-row\",[l(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:function(t){return e.addJmOrgDialog()}}},[e._v(\"添加紧密公司\")])],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"searchInputDiv\",staticStyle:{float:\"right\"}},[l(\"el-autocomplete\",{staticClass:\"searchInput\",attrs:{\"fetch-suggestions\":e.querySearch,placeholder:\"请输入分类名称或公司名称搜索\",size:\"small\",autosize:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.searchPersonInfo(e.searchKey)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:\"searchKey\"}},[l(\"i\",{staticClass:\"el-icon-search el-input__icon\",attrs:{slot:\"suffix\"},on:{click:function(t){return e.searchPersonInfo(e.searchKey)}},slot:\"suffix\"})])],1)]),e._v(\" \"),l(\"div\",{attrs:{id:\"jmOrgListTable\"}},[l(\"el-table\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"50px\"},attrs:{data:e.jmOrgList,border:\"\"}},[l(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgTypeName\",label:\"类型\"}}),e._v(\" \"),l(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgCode\",label:\"公司编号\"}}),e._v(\" \"),l(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgNameAbbr\",label:\"公司简称\"}}),e._v(\" \"),l(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgName\",label:\"公司名称\"}}),e._v(\" \"),l(\"el-table-column\",{attrs:{align:\"center\",prop:\"isEnabled\",label:\"是否可用\",sortable:\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[0==t.row.isEnabled?l(\"span\",[e._v(\"不可用\")]):e._e(),e._v(\" \"),1==t.row.isEnabled?l(\"span\",[e._v(\"可用\")]):e._e()]}}])}),e._v(\" \"),l(\"el-table-column\",{attrs:{prop:\"\",label:\"操作\",align:\"center\",width:\"250\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-button\",{attrs:{size:\"small\"},on:{click:function(l){return e.toJmOrgDetail(t.row.jmOrgId)}}},[e._v(\"查看\")]),e._v(\" \"),0==t.row.isEnabled?l(\"el-button\",{attrs:{size:\"small\"},on:{click:function(l){return e.editOrgStatus(t.row)}}},[e._v(\"激活\")]):e._e(),e._v(\" \"),1==t.row.isEnabled?l(\"el-button\",{attrs:{size:\"small\"},on:{click:function(l){return e.editOrgStatus(t.row)}}},[e._v(\"注销\")]):e._e(),e._v(\" \"),l(\"el-button\",{attrs:{size:\"small\"},on:{click:function(l){return e.deleteJmOrgDialog(t.row)}}},[e._v(\"删除\")])]}}])})],1)],1)]),e._v(\" \"),l(\"el-dialog\",{attrs:{title:\"新增\",visible:e.addJmOrgFormVisible,\"before-close\":e.resetForm,width:\"30%\"},on:{\"update:visible\":function(t){e.addJmOrgFormVisible=t}}},[l(\"el-form\",{ref:\"orgInfo\",attrs:{model:e.orgInfo,rules:e.rules}},[l(\"el-form-item\",{attrs:{label:\"所属分类\",\"label-width\":e.formLabelWidth,prop:\"orgType\"}},[l(\"el-select\",{staticClass:\"addOrgInput\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择分类\"},on:{change:e.selectOrgTypeChange},model:{value:e.orgInfo.orgType,callback:function(t){e.$set(e.orgInfo,\"orgType\",t)},expression:\"orgInfo.orgType\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.jmOrgType\"),function(e){return l(\"el-option\",{key:e.dicKey,staticClass:\"addOrgInput\",attrs:{label:e.dicName,value:e.dicKey}})}),1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"公司编号\",\"label-width\":e.formLabelWidth,prop:\"orgCode\"}},[l(\"el-row\",[l(\"el-col\",{attrs:{span:18}},[l(\"el-input\",{model:{value:e.orgInfo.orgCode,callback:function(t){e.$set(e.orgInfo,\"orgCode\",t)},expression:\"orgInfo.orgCode\"}})],1)],1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"公司名称\",\"label-width\":e.formLabelWidth,prop:\"orgName\"}},[l(\"el-row\",[l(\"el-col\",{attrs:{span:18}},[l(\"el-input\",{model:{value:e.orgInfo.orgName,callback:function(t){e.$set(e.orgInfo,\"orgName\",t)},expression:\"orgInfo.orgName\"}})],1)],1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"公司简称\",\"label-width\":e.formLabelWidth,prop:\"orgNameAbbr\"}},[l(\"el-row\",[l(\"el-col\",{attrs:{span:18}},[l(\"el-input\",{model:{value:e.orgInfo.orgNameAbbr,callback:function(t){e.$set(e.orgInfo,\"orgNameAbbr\",t)},expression:\"orgInfo.orgNameAbbr\"}})],1)],1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"成立时间\",\"label-width\":e.formLabelWidth,prop:\"orgCreateTm\"}},[l(\"el-row\",[l(\"el-col\",{attrs:{span:18}},[l(\"el-input\",{model:{value:e.orgInfo.orgCreateTm,callback:function(t){e.$set(e.orgInfo,\"orgCreateTm\",t)},expression:\"orgInfo.orgCreateTm\"}})],1)],1)],1),e._v(\" \"),l(\"el-form-item\",{attrs:{label:\"公司总部\",\"label-width\":e.formLabelWidth,prop:\"address\"}},[l(\"el-row\",[l(\"el-col\",{attrs:{span:18}},[l(\"el-input\",{model:{value:e.orgInfo.address,callback:function(t){e.$set(e.orgInfo,\"address\",t)},expression:\"orgInfo.address\"}})],1)],1)],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{on:{click:e.resetForm}},[e._v(\"取 消\")]),e._v(\" \"),l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.addJmOrg(e.orgInfo)}}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),l(\"el-dialog\",{attrs:{title:\"提示\",visible:e.deleteJmOrgDialogVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.deleteJmOrgDialogVisible=t}}},[l(\"span\",[e._v(\"是否删除?\")]),e._v(\" \"),l(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{on:{click:function(t){e.deleteJmOrgDialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),l(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.deleteJmOrg()}}},[e._v(\"确 定\")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"head\"},[t(\"h3\",[this._v(\"紧密公司\")])])}]}}});","extractedComments":[]}