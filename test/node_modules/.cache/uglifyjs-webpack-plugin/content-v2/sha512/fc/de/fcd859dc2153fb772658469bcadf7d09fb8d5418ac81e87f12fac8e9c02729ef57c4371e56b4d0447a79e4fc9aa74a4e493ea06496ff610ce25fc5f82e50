{"code":"webpackJsonp([16],{1305:function(e,t,l){var r=l(91)(l(1870),l(1871),function(e){l(1869)},null,null);e.exports=r.exports},1869:function(e,t){},1870:function(e,t,l){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,s=l(75),o=(r=s)&&r.__esModule?r:{default:r};t.default={props:[\"projectId\"],data:function(){return{correctFlag:!0,fileNum:1,fileList:[],deleteFileId:\"\",myrules:{projectName:[{required:!0,message:\"请输入项目名称\",trigger:\"blur\"}],origin:[{required:!0,message:\"请选择项目来源\",trigger:\"change\"}],projectType:[{required:!0,message:\"请选择项目类别\",trigger:\"change\"}],metricsValue:[{required:!0,message:\"衡量指标\",trigger:\"blur\"}],companyId:[{required:!0,message:\"请选择发起部门\",trigger:\"change\"}],managerPersons:[{required:!0,message:\"请选择项目责任人\",trigger:\"change\"}],followerPersons:[{required:!0,message:\"请选择项目跟进人\",trigger:\"change\"}],followCircle:[{required:!0,message:\"请选择回顾周期\",trigger:\"change\"}],beginDate:[{required:!0,message:\"请选择开始日期\",trigger:\"change\"}],endDate:[{required:!0,message:\"请选择结束日期\",trigger:\"change\"}]},orgPersonForProManager:[],orgPersonForProFollower:[],orgPersonForProSubFollower:[],subOrgListForChoose:[],orgDepartmentList:[],newPrj:{projectId:\"\",companyId:\"24\",projectCode:\"\",projectName:\"\",origin:\"\",originKey:\"\",originValue:\"\",projectType:\"\",typeKey:\"\",typeValue:\"\",metricsKey:\"\",metricsValue:\"\",projectLevel:\"\",levelKey:\"\",levelValue:\"\",followCircle:\"\",followCircleKey:\"\",followCircleValue:\"\",beginDate:\"\",endDate:\"\",background:\"\",projectStatus:\"\",managerPersons:[],followerPersons:[],file:{},milestones:[],originInfo:{}}}},mounted:function(){},created:function(){this.initData()},watch:{projectId:function(){this.initData()}},methods:{initData:function(){var e=this,t={projectId:this.projectId};this.projectId&&this.$httpExt().post(\"project/\"+this.projectId,t).then(function(t){e.originInfo=t.result,console.log(\"1this.originInfo\",e.originInfo),e.originInfo.milestones.length&&e.originInfo.milestones.forEach(function(e){0==e.hasUndertake&&(e.undertake={milestoneUndertakeOrgId:1,milestoneUndertakeContent:\"\"})}),console.log(\"this.originInfo\",e.originInfo),(0,o.default)(e.newPrj,e.originInfo),e.newPrj.origin=e.originInfo.originValue,e.newPrj.projectType=e.originInfo.typeValue,e.newPrj.projectLevel=e.originInfo.levelValue,e.newPrj.followCircle=e.originInfo.followCircleValue,e.fileList=[],e.fileList.push({name:null==e.newPrj.file?\"\":e.newPrj.file.fileName}),e.fetchOrgList(),e.getInitiatingDepartment(),e.fetchOrgPerson(e.newPrj.companyId,\"noReset\"),console.log(2,e.newPrj.milestones)}).catch(function(e){console.log(e)})},beforeUpload:function(e){if(e.size>10485760)return this.correctFlag=!1,this.$message({message:\"上传失败，文件大小超过10M\",type:\"error\"}),!1;var t=e.name.split(\".\").slice(-1)[0],l=/(xls|xlsx|ppt|pptx|doc|docx)/;return console.log(\"zz\",t,l.test(t)),l.test(t)?void 0:(this.correctFlag=!1,this.$message({message:\"上传失败，文件格式应为xls,xlsx,ppt,pptx,doc,docx\",type:\"error\"}),this.fileList=[],!1)},beforeRemove:function(e,t){if(console.log(\"bd\",e,t),this.correctFlag)return e.response?this.deleteFileId=e.response.result.fileId:this.deleteFileId=this.newPrj.file.fileId,this.$confirm(\"确定移除 \"+e.name+\"？\")},deleteFile:function(e,t){var l=this;console.log(\"del\",e,t),this.correctFlag&&this.$httpExt().delete(\"/file/delete/\"+this.deleteFileId).then(function(e){l.fileList=t}).catch(function(e){console.log(e)})},uploadSuccess:function(e,t,l){this.$message({message:\"上传成功\",type:\"success\"}),this.fileList=l,console.log(\"res\",e,t,l)},exceedWarn:function(e,t,l){this.$message({message:\"最多只能上传一个文件\",type:\"error\"})},getInitiatingDepartment:function(){var e=this;this.$httpExt().post(\"gmrt/org/list\",{orgTypeList:[\"JM\",\"FL\"]}).then(function(t){null!=t.result&&void 0!=t.result&&0!=t.result.length&&(e.orgDepartmentList=[],e.orgDepartmentList=e.$extendDeepCopy(e.orgDepartmentList,t.result))}).catch(function(e){console.log(e)})},fetchOrgPerson:function(e,t){console.log(\"companyId\",e);var l=this;\"reset\"==t&&(l.newPrj.managerPersons=[],l.newPrj.followerPersons=[],l.newPrj.milestones.forEach(function(e){e.subFollowers=[]}));var r={projectOrgId:e};l.$httpExt().post(\"gmrt/org/person\",r).then(function(e){null!=e.result&&void 0!=e.result&&0!=e.result.length?(l.orgPersonForProManager=[],l.orgPersonForProFollower=[],l.orgPersonForProSubFollower=[],l.orgPersonForProManager=l.$extendDeepCopy(l.orgPersonForProManager,e.result),l.orgPersonForProFollower=l.$extendDeepCopy(l.orgPersonForProFollower,e.result),l.orgPersonForProSubFollower=l.$extendDeepCopy(l.orgPersonForProSubFollower,e.result),l.newPrj.milestones.forEach(function(t){t.subFollowerList=[],t.subFollowerList=l.$extendDeepCopy(t.subFollowerList,e.result)})):(l.orgPersonForProManager=[],l.orgPersonForProFollower=[],l.orgPersonForProSubFollower=[],l.newPrj.milestones.forEach(function(e){e.subFollowerList=[]}))}).catch(function(e){})},deleteSubItem:function(e){this.newPrj.milestones.splice(e,1)},changesubOrgListSelect:function(e,t,l){var r=this,s={projectOrgId:e};\"reset\"==l&&(r.newPrj.milestones[t].managerPersons=[],r.newPrj.milestones[t].followerPersons=[]),r.$httpExt().post(\"gmrt/org/person\",s).then(function(l){console.log(\"gmrt/org/person\",e,l.result),null!=l.result&&void 0!=l.result&&0!=l.result.length?(r.$set(r.newPrj.milestones[t],\"managerPersonsList\",[]),r.$set(r.newPrj.milestones[t],\"managerPersonsList\",r.$extendDeepCopy(r.newPrj.milestones[t].managerPersonsList,l.result)),r.$set(r.newPrj.milestones[t],\"followerPersonsList\",[]),r.$set(r.newPrj.milestones[t],\"followerPersonsList\",r.$extendDeepCopy(r.newPrj.milestones[t].followerPersonsList,l.result))):(r.newPrj.milestones[t].managerPersonsList=[],r.newPrj.milestones[t].followerPersonsList=[])}).catch(function(e){})},clickNewMilestone:function(){var e={milestoneTitle:\"\",milestoneContent:\"\",milestoneDeliverable:\"\",milestoneBeginDate:\"\",milestoneEndDate:\"\",hasUndertake:1,milestoneUndertakeOrgId:\"\",undertake:{milestoneUndertakeOrgId:1,milestoneUndertakeContent:\"\"},subFollowers:[],managerPersons:[],followerPersons:[],subOrgList:[],subFollowerList:[],managerPersonsList:[],followerPersonsList:[]};e.subFollowerList=this.$extendDeepCopy(e.subFollowerList,this.orgPersonForProSubFollower),e.subOrgList=this.$extendDeepCopy(e.subOrgList,this.subOrgListForChoose),this.newPrj.milestones.push(e)},fetchOrgList:function(){var e=this;this.$httpExt().post(\"gmrt/org/list\",{orgTypeList:[\"JM\",\"FL\"]}).then(function(t){null!=t.result&&void 0!=t.result&&0!=t.result.length&&(e.subOrgListForChoose=[],e.subOrgListForChoose=e.$extendDeepCopy(e.subOrgListForChoose,t.result),e.newPrj.milestones.forEach(function(t,l){t.subOrgList=[],t.subOrgList=e.subOrgListForChoose,1==t.hasUndertake&&e.changesubOrgListSelect(t.undertake.milestoneUndertakeOrgId,l,\"noReset\")}))}).catch(function(e){console.log(e)})},sendPrj:function(){var e=this,t=!1;if(this.$refs.prjRuleForm.validate(function(e){t=!!e}),t){var l=e.$extendDeepCopy(e.newPrj,l);l.originKey=e.newPrj.origin.dicKey||l.originKey,l.originValue=e.newPrj.origin.dicName||l.originValue,l.typeKey=e.newPrj.projectType.dicKey||l.typeKey,l.typeValue=e.newPrj.projectType.dicName||l.typeValue,l.levelKey=e.newPrj.projectLevel.dicKey||l.levelKey,l.levelValue=e.newPrj.projectLevel.dicName||l.levelValue,l.followCircleKey=e.newPrj.followCircle.dicKey||l.followCircleKey,l.followCircleValue=e.newPrj.followCircle.dicName||l.followCircleValue,l.authority={projectId:l.projectId},console.log(this.fileList);var r=\"\",s=\"\";this.fileList.length&&this.fileList[0].response&&(r=this.fileList[0].response.result.fileId,s=this.fileList[0].response.result.contentType,l.file={fileId:r,fileType:s}),l.milestones.forEach(function(e){0==e.hasUndertake&&(e.undertake=null)}),this.$httpExt().post(\"project/update\",l).then(function(t){e.$confirm(\"修改成功\",\"\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"success\",center:!0}).then(function(){e.$emit(\"page\",\"项目全景图\",e.newPrj.projectId,\"详情页\")}).catch(function(){})}).catch(function(t){e.$confirm(\"修改失败\",\"\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"fail\",center:!0})})}},onChange:function(e){this.filepath=event.target.files[0],console.log(\"发送文件成功-----\"),this.sendFile()}}}},1871:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"modify-project\"},[l(\"div\",{staticClass:\"wrap\"},[e._m(0),e._v(\" \"),l(\"div\",{staticClass:\"container\"},[l(\"el-form\",{ref:\"prjRuleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.newPrj,rules:e.myrules,\"label-position\":\"right\",\"label-width\":\"110px\"}},[l(\"div\",{staticClass:\"basic\"},[l(\"h3\",[e._v(\"基本详情\")]),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{ref:\"ruleForm\",staticClass:\"m-right\",attrs:{prop:\"projectName\",label:\"项目名称\"}},[l(\"el-input\",{staticClass:\"input-size\",model:{value:e.newPrj.projectName,callback:function(t){e.$set(e.newPrj,\"projectName\",t)},expression:\"newPrj.projectName\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目来源\",prop:\"origin\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目来源\"},model:{value:e.newPrj.origin,callback:function(t){e.$set(e.newPrj,\"origin\",t)},expression:\"newPrj.origin\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.origin\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目类别\",prop:\"projectType\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目类别\"},model:{value:e.newPrj.projectType,callback:function(t){e.$set(e.newPrj,\"projectType\",t)},expression:\"newPrj.projectType\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.projectType\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"衡量指标\",prop:\"metricsValue\"}},[l(\"el-input\",{staticClass:\"input-size\",model:{value:e.newPrj.metricsValue,callback:function(t){e.$set(e.newPrj,\"metricsValue\",t)},expression:\"newPrj.metricsValue\"}})],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目级别\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目级别\"},model:{value:e.newPrj.projectLevel,callback:function(t){e.$set(e.newPrj,\"projectLevel\",t)},expression:\"newPrj.projectLevel\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.projectLevel\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"发起部门\",prop:\"companyId\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"grmtOrgId\",placeholder:\"请选择\"},on:{change:function(t){return e.fetchOrgPerson(e.newPrj.companyId,\"reset\")}},model:{value:e.newPrj.companyId,callback:function(t){e.$set(e.newPrj,\"companyId\",t)},expression:\"newPrj.companyId\"}},e._l(e.orgDepartmentList,function(e){return l(\"el-option\",{key:e.grmtOrgId,attrs:{label:e.orgName,value:e.grmtOrgId}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目责任人\",prop:\"managerPersons\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请选择\"},model:{value:e.newPrj.managerPersons,callback:function(t){e.$set(e.newPrj,\"managerPersons\",t)},expression:\"newPrj.managerPersons\"}},e._l(e.orgPersonForProManager,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目跟进人\",prop:\"followerPersons\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请选择\"},model:{value:e.newPrj.followerPersons,callback:function(t){e.$set(e.newPrj,\"followerPersons\",t)},expression:\"newPrj.followerPersons\"}},e._l(e.orgPersonForProFollower,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"起止时间\",required:\"\"}},[l(\"el-col\",{attrs:{span:10}},[l(\"el-form-item\",{attrs:{prop:\"beginDate\"}},[l(\"el-date-picker\",{staticStyle:{width:\"83%\",\"margin-left\":\"15px\"},attrs:{type:\"date\",placeholder:\"开始日期\"},model:{value:e.newPrj.beginDate,callback:function(t){e.$set(e.newPrj,\"beginDate\",t)},expression:\"newPrj.beginDate\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"line\",attrs:{span:2}},[e._v(\"至\")]),e._v(\" \"),l(\"el-col\",{attrs:{span:10}},[l(\"el-form-item\",{attrs:{prop:\"endDate\"}},[l(\"el-date-picker\",{staticStyle:{width:\"83%\"},attrs:{type:\"date\",placeholder:\"结束日期\"},model:{value:e.newPrj.endDate,callback:function(t){e.$set(e.newPrj,\"endDate\",t)},expression:\"newPrj.endDate\"}})],1)],1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"回顾周期\",prop:\"followCircle\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择回顾周期\"},model:{value:e.newPrj.followCircle,callback:function(t){e.$set(e.newPrj,\"followCircle\",t)},expression:\"newPrj.followCircle\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.followCircle\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-form-item\",{staticClass:\"label-margin\",attrs:{label:\"背景与目的\"}},[l(\"el-upload\",{staticClass:\"background\",attrs:{name:\"fileInput\",limit:e.fileNum,action:e.$store.state.global.url+\"file/upload\",\"before-remove\":e.beforeRemove,\"on-remove\":e.deleteFile,\"file-list\":e.fileList,\"on-success\":e.uploadSuccess,\"on-exceed\":e.exceedWarn,\"before-upload\":e.beforeUpload}},[l(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"修改上传\")]),e._v(\" \"),l(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"上传附件必须为word、excell格式文件，且大小不超过10M\")])],1),e._v(\" \"),l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{resize:\"none\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:e.newPrj.background,callback:function(t){e.$set(e.newPrj,\"background\",t)},expression:\"newPrj.background\"}})],1)],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"milestone\"},[l(\"h3\",[e._v(\"子事项\")]),e._v(\" \"),e._l(e.newPrj.milestones,function(t,r){return l(\"div\",{key:r},[r?l(\"el-row\",[l(\"div\",{staticClass:\"seperaterLine\"})]):e._e(),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{staticStyle:{\"font-weight\":\"bold\"},attrs:{label:\"子事项\"+(r+1),prop:\"milestones.\"+r+\".milestoneTitle\",rules:{required:!0,message:\"请填写子事项名称\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"input-size\",attrs:{placeholder:\"请填写子事项名称\"},model:{value:t.milestoneTitle,callback:function(l){e.$set(t,\"milestoneTitle\",l)},expression:\"milestone.milestoneTitle\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"起止时间\",required:\"\"}},[l(\"el-col\",{attrs:{span:11}},[l(\"el-form-item\",{attrs:{prop:\"milestones.\"+r+\".milestoneBeginDate\",rules:{required:!0,message:\"请选择开始日期\",trigger:\"change\"}}},[l(\"el-date-picker\",{staticClass:\"label-time\",attrs:{type:\"date\",placeholder:\"开始日期\"},model:{value:t.milestoneBeginDate,callback:function(l){e.$set(t,\"milestoneBeginDate\",l)},expression:\"milestone.milestoneBeginDate\"}})],1)],1),e._v(\" \"),l(\"el-col\",{attrs:{span:11}},[l(\"el-form-item\",{attrs:{prop:\"milestones.\"+r+\".milestoneEndDate\",rules:{required:!0,message:\"请选择结束日期\",trigger:\"change\"}}},[l(\"el-date-picker\",{staticStyle:{width:\"80%\"},attrs:{type:\"date\",placeholder:\"结束日期\"},model:{value:t.milestoneEndDate,callback:function(l){e.$set(t,\"milestoneEndDate\",l)},expression:\"milestone.milestoneEndDate\"}})],1)],1)],1)],1),e._v(\" \"),l(\"el-col\",{attrs:{span:2}},[l(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){return e.deleteSubItem(r)}}},[e._v(\"删除\")])],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"交付物\",prop:\"milestones.\"+r+\".milestoneDeliverable\",rules:{required:!0,message:\"请填写交付物\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"input-size\",attrs:{placeholder:\"请填写交付物\"},model:{value:t.milestoneDeliverable,callback:function(l){e.$set(t,\"milestoneDeliverable\",l)},expression:\"milestone.milestoneDeliverable\"}})],1)],1)]),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"子事项跟进人\",prop:\"milestones.\"+r+\".subFollowers\",rules:{required:!0,message:\"请选择子事项跟进人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择发起部门\"},model:{value:t.subFollowers,callback:function(l){e.$set(t,\"subFollowers\",l)},expression:\"milestone.subFollowers\"}},e._l(t.subFollowerList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)])],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin errortip\"},[l(\"el-form-item\",{staticClass:\"errortip\",attrs:{label:\"子事项\",prop:\"milestones.\"+r+\".milestoneContent\",rules:{required:!0,message:\"请输入内容\",trigger:\"blur\"},\"inline-message\":\"false0\"}},[l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:t.milestoneContent,callback:function(l){e.$set(t,\"milestoneContent\",l)},expression:\"milestone.milestoneContent\"}})],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"是否有承接部门\"}},[l(\"el-radio-group\",{staticStyle:{\"margin-left\":\"20px\"},model:{value:t.hasUndertake,callback:function(l){e.$set(t,\"hasUndertake\",l)},expression:\"milestone.hasUndertake\"}},[l(\"el-radio\",{attrs:{label:1}},[e._v(\"是\")]),e._v(\" \"),l(\"el-radio\",{attrs:{label:0}},[e._v(\"否\")])],1)],1)],1)]),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[\"1\"==t.hasUndertake?l(\"div\",{staticClass:\"grid-content bg-purple-light\"},[l(\"el-form-item\",{attrs:{label:\"承接部门\",prop:\"milestones.\"+r+\".undertake.milestoneUndertakeOrgId\",rules:{required:!0,message:\"请选择承接部门\",trigger:\"change\"}}},[l(\"el-select\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{placeholder:\"请选择\"},on:{change:function(l){return e.changesubOrgListSelect(t.undertake.milestoneUndertakeOrgId,r,\"reset\")}},model:{value:t.undertake.milestoneUndertakeOrgId,callback:function(l){e.$set(t.undertake,\"milestoneUndertakeOrgId\",l)},expression:\"milestone.undertake['milestoneUndertakeOrgId']\"}},e._l(t.subOrgList,function(e,t){return l(\"el-option\",{key:t,attrs:{label:e.orgName,value:e.grmtOrgId}})}),1)],1)],1):e._e()])],1),e._v(\" \"),\"1\"==t.hasUndertake?l(\"div\",[l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"承接方责任人\",prop:\"milestones.\"+r+\".managerPersons\",rules:{required:!0,message:\"请选择承接方责任人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择承接部门\"},model:{value:t.managerPersons,callback:function(l){e.$set(t,\"managerPersons\",l)},expression:\"milestone.managerPersons\"}},e._l(t.managerPersonsList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{staticClass:\"len\",attrs:{label:\"承接方跟进人\",prop:\"milestones.\"+r+\".followerPersons\",rules:{required:!0,message:\"请选择承接方跟进人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择承接部门\"},model:{value:t.followerPersons,callback:function(l){e.$set(t,\"followerPersons\",l)},expression:\"milestone.followerPersons\"}},e._l(t.followerPersonsList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\"},[l(\"el-form-item\",{staticClass:\"errortip\",attrs:{label:\"承接事项\",prop:\"milestones.\"+r+\".undertake.milestoneUndertakeContent\",rules:{required:!0,message:\"请输入内容\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:t.undertake.milestoneUndertakeContent,callback:function(l){e.$set(t.undertake,\"milestoneUndertakeContent\",l)},expression:\"milestone.undertake.milestoneUndertakeContent\"}})],1)],1)],1)],1):e._e()],1)}),e._v(\" \"),l(\"div\",{staticClass:\"m-add\"},[l(\"el-button\",{staticClass:\"m-button\",attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:e.clickNewMilestone}},[e._v(\"添加新子事项\")])],1)],2),e._v(\" \"),l(\"el-form-item\",{staticStyle:{\"text-align\":\"center\"}},[l(\"el-button\",{staticClass:\"n-button\",attrs:{type:\"primary\"},on:{click:e.sendPrj}},[e._v(\"保存\")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"p-link\"},[t(\"span\",[this._v(\"我的项目\")]),this._v(\" \"),t(\"span\",[this._v(\">\")]),this._v(\" \"),t(\"span\",{staticClass:\"link-text\"},[this._v(\"修改重点项目\")])])}]}}});","extractedComments":[]}