{"code":"webpackJsonp([1],{1308:function(e,t,r){var s=r(91)(r(1879),r(1895),function(e){r(1878)},null,null);e.exports=s.exports},1328:function(e,t,r){var s=r(91)(r(1330),r(1331),function(e){r(1329)},null,null);e.exports=s.exports},1329:function(e,t){},1330:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={props:[\"projectDetailInfo\"],data:function(){return{showIndex:2,selectitem:null,allMilestoneData:[],allFollow:[],selectFollowIndex:0}},mounted:function(){},methods:{initAllMilestone:function(){var e=new Date,t=e.getFullYear();e.getMonth(),e.getDate();this.allMilestoneData=this.projectDetailInfo.milestones;for(var r=new Date(t+\"-1-1\").getTime(),s=(new Date).getTime(),o=111e11,i=null,n=0;n<this.allMilestoneData.length;n++){var l=(f=this.allMilestoneData[n]).milestoneBeginDate,a=f.milestoneEndDate,c=new Date(l).getTime(),u=new Date(a).getTime(),g=(u-r)/31536e6*100;this.allMilestoneData[n].left=g+\"%\";var p=(u-c)/31536e6;this.allMilestoneData[n].widthScale=p,this.allMilestoneData[n].bindLeft=g-100*p+\"%\",console.log(this.allMilestoneData[n].left),u>s&&u<o&&(i=n,o=u),this.stoneClick(i)}this.allFollow=this.projectDetailInfo.bigFollows;for(n=0;n<this.allFollow.length;n++){var f,d=(f=this.allFollow[n].follow[0]).followTime;g=(new Date(d).getTime()-r)/31536e6*100;this.allFollow[n].left=g+\"%\",console.log(this.allFollow[n].left)}this.selectFollowIndex=this.allFollow.length-1,this.followClick(this.selectFollowIndex),this.$forceUpdate()},changeSelect:function(e){this.selectitem=this.allMilestoneData[e]},stoneClick:function(e){console.log(\"stoneClick\"+e),this.$emit(\"stoneClick\",e),this.selectitem=this.allMilestoneData[e]},followClick:function(e){console.log(\"followClick\"+e),this.$emit(\"followClick\",e),this.selectFollowIndex=e},dealNum:function(e){var t=\"\";switch(e){case 0:t=\"一\";break;case 1:t=\"二\";break;case 2:t=\"三\";break;case 3:t=\"四\";break;case 4:t=\"五\";break;case 5:t=\"六\";break;case 6:t=\"七\";break;case 7:t=\"八\";break;case 8:t=\"九\";break;default:t=\"\"}return t}}}},1331:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"time-base\"},[r(\"div\",{staticClass:\"time_line_box\"},[r(\"div\",{staticClass:\"time_line\",staticStyle:{width:\"90%\"}},[e._m(0),e._v(\" \"),r(\"ol\",{staticStyle:{\"margin-top\":\"60px\"}},e._l(e.allFollow,function(t,s){return r(\"li\",{on:{click:function(t){return e.followClick(s)}}},[r(\"a\",{staticClass:\"follow_item\",class:{follow_item_select:s==e.selectFollowIndex},style:{left:t.left}},[r(\"span\",{staticClass:\"fellowText\"},[e._v(\"跟进\"+e._s(e.dealNum(s)))])])])}),0),e._v(\" \"),r(\"div\",e._l(e.allMilestoneData,function(t,s){return r(\"span\",{key:s,staticClass:\"milestoneLine\",style:{left:t.left},on:{click:function(t){return e.stoneClick(s)}}},[r(\"span\",{staticClass:\"milestoneText\"},[e._v(\"子事项\"+e._s(s+1))]),e._v(\" \"),r(\"span\",{staticClass:\"milestoneCude\"})])}),0),e._v(\" \"),e.selectitem?r(\"span\",{staticClass:\"filling_line2\",style:{left:e.selectitem.bindLeft,transform:\"scaleX(\"+e.selectitem.widthScale+\")\"}}):e._e()])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"ol\",[r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"0%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"1月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"8.49%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"2月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"16.16%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"3月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"24.65%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"4月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"32.87%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"5月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"41.36%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"6月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"49.58%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"7月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"58.08%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"8月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"66.57%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"9月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item \",staticStyle:{left:\"74.79%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"10月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"83.28%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"11月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"91.50%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"12月\")])])]),e._v(\" \"),r(\"li\",[r(\"a\",{staticClass:\"order_item\",staticStyle:{left:\"100.0%\"}},[r(\"span\",{staticClass:\"monthText\"},[e._v(\"2020年\")])])])])}]}},1511:function(e,t,r){var s=r(93);e.exports=function(e,t){if(!s(e)||e._t!==t)throw TypeError(\"Incompatible receiver, \"+t+\" required!\");return e}},1878:function(e,t){},1879:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=n(r(137)),o=n(r(1880)),i=n(r(1328));function n(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{orgInfo:{superiorOrg:\"\"},personInfo:{},orgPersonInfo:{},currentPage:1,pageSize:10,searchKey:\"\",editOrgPersonDialogVisible:!1,addPersonDialogVisible:!1,deletePersonDialogVisible:!1,editSecondOrgDialogFormVisible:!1,deleteOrgDialogVisible:!1,formLabelWidth:\"150px\",personFormOptionLabelWidth:\"150px\",personList:[],selectPersonNum:\"\",orgType:\"\",selectOrgType:\"\",superiorOrg:\"\",orgTypeList:[],deleteOrgId:\"\",personMap:new o.default,overallPlanningList:[],selectablePersonList:[],selectProjectOrgType:\"\",deletePersonGrmtOrgId:\"\",personListTem:[],deletePersonIdList:[],restaurants:[],disabledRoleType:!1,roleTypeList:[],selectRoleType:\"\",rules:{projectOrgType:[{required:!0,message:\"请选择角色\",trigger:\"blur\"}],personInfoId:[{required:!0,message:\"请选择人员\",trigger:\"blur\"}],orgType:[{required:!0,message:\"请选择组织类型\",trigger:\"blur\"}],orgName:[{required:!0,message:\"请填写组织名称\",trigger:\"blur\"}]}}},watch:{titleFlag:function(){this.show=this.titleFlag}},computed:{},components:{timeBase:i.default},mounted:function(){this.getOrgList(),this.getPersonList()},methods:{querySearch:function(e,t){var r=this.restaurants;t(e?r.filter(this.createFilter(e)):r)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex){var r=this.spanArr[t];return{rowspan:r,colspan:r>0?1:0}}},searchPersonInfo:function(e){this.searchKey=e,this.getOrgList()},getOrgList:function(){var e=this,t={searchKey:this.searchKey};this.$httpExt().post(\"overallPlanning/getOverallPlanningInfo\",t).then(function(t){var r=t.result;if(null!=r&&void 0!=r&&0!=r.length){for(var s=r,o=0;o<s.length;o++){var i=s[o],n=i.orgTypeMap;for(var l in n)i[l]=n[l]}e.overallPlanningList=r,e.getSpanArr(e.overallPlanningList)}else e.overallPlanningList=[]}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},getSpanArr:function(e){this.spanArr=[];for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.pos=0):e[t].orgType===e[t-1].orgType?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t)},editSecondOrgDialog:function(e){void 0==e?this.orgInfo={}:(this.orgInfo=e,this.superiorOrg=this.orgInfo.superiorOrg),this.editSecondOrgDialogFormVisible=!0},addOrgPersonDialog:function(e){void 0==e?this.orgPersonInfo={}:(this.orgPersonInfo=e,this.handleRoleType(e)),this.addPersonDialogVisible=!0},handleRoleType:function(e){var t=this.$dicTool().getListKeyName(\"grmt_setting.roleType\");if(\"JM\"===e.orgType)for(var r=0;r<t.length;r++){var s=t[r];if(\"contact\"===s.dicKey){s.disabledRoleType=!0;break}}this.roleTypeList=t},editOrgPersonDialog:function(e){this.deletePersonGrmtOrgId=e.grmtOrgId,this.personMap=e.personMap;var t=[];for(var r in this.personMap)for(var s=this.personMap[r],o=0;o<s.length;o++)t.push(s[o]);this.personList=t,this.personListTem=t,this.editOrgPersonDialogVisible=!0},deletePersonDialog:function(e){this.projectOrgPersonId=e.projectOrgPersonId,this.deletePersonDialogVisible=!0},unbindPerson:function(){var e=this,t=this.projectOrgPersonId,r={projectOrgPersonId:this.projectOrgPersonId};this.$httpExt().post(\"overallPlanning/unbind\",r).then(function(r){var s=r.result;if(null!=s&&void 0!=s){e.$message({message:\"删除成功\",type:\"success\"}),e.deletePersonDialogVisible=!1;for(var o=e.personListTem,i=0;i<o.length;i++){o[i].projectOrgPersonId==t&&o.splice(i,1)}e.personList=o,e.getOrgList()}}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},selectPersonChange:function(e){var t=this.selectablePersonList;if(null!=t&&t.length>0)for(var r=0;r<t.length;r++){var s=t[r];if(s.personInfoId==e){this.selectPersonNum=s.personNum;break}}},binding:function(e){var t=this;this.$refs.orgPersonInfo.validate(function(r){if(r){var o=e.projectOrgPersonId,i={projectOrgPersonId:o,projectOrgType:e.projectOrgType,projectOrgId:e.grmtOrgId,personInfoId:e.personInfoId,personNum:t.selectPersonNum};t.$httpExt().post(\"overallPlanning/binding\",i).then(function(e){var r=e.result;null!=r&&void 0!=r?(t.$message({message:null==o?\"添加成功\":\"修改成功\",type:\"success\"}),t.selectPersonNum=\"\",t.addPersonDialogVisible=!1,t.getOrgList()):t.$message({message:e.msg,type:\"warning\"})}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})}})},resetOrgInfoForm:function(){this.editSecondOrgDialogFormVisible=!1,this.superiorOrg=\"\",this.$refs.orgInfo.resetFields(),this.getOrgList()},resetForm:function(){this.addPersonDialogVisible=!1,this.$refs.orgPersonInfo.resetFields()},handleCommand:function(){var e=this.selectRoleType;if(void 0!=this.personMap&&\"\"!=this.personMap&&null!=this.personMap)if(\"all\"==e){var t=[],r=this.deletePersonIdList;for(var s in this.personMap){for(var o=this.personMap[s],i=0;i<o.length;i++)t.push(o[i]);for(var n=0;n<r.length;n++)for(var l=r[n],a=0;a<t.length;a++){t[a].projectOrgPersonId==l&&t.splice(a,1)}}this.personList=t}else if(null!=this.personMap[e]){this.personList=this.personMap[e];var c=this.deletePersonIdList;for(a=0;a<c.length;a++){var u=c[a];for(n=0;n<this.personList.length;n++){this.personList[n].projectOrgPersonId==u&&this.personList.splice(n,1)}}}else this.personList=[];else this.personList=[]},resetPersonForm:function(){this.editOrgPersonDialogVisible=!1,this.selectRoleType=\"\"},selectOrgTypeChange:function(){this.selectOrgType=this.orgInfo.orgType;var e=this.$dicTool().getListKeyName(\"grmt_setting.selectMenu.orgType.\"+this.selectOrgType);if(null!=e&&e.length>0){var t=e[0].dicName;this.superiorOrg=t}else this.superiorOrg=\"\";this.orgTypeList=e},editSecondOrg:function(e){var t=this;this.$refs.orgInfo.validate(function(r){if(r){var o=e.orgName,i=e.grmtOrgId,n={orgType:e.orgType,superiorOrg:t.superiorOrg,grmtOrgId:i,orgName:e.orgName,orgNameAbbr:e.orgNameAbbr};t.$httpExt().post(\"overallPlanning/modifySecondOrg\",n).then(function(e){var r=e.result;null!=r&&void 0!=r&&(t.$message({message:null==i?\"添加成功\":\"修改成功\",type:\"success\"}),t.editSecondOrgDialogFormVisible=!1,t.searchKey=o,t.getOrgList(),t.superiorOrg=\"\")}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})}})},deleteSecondOrgDialog:function(e){this.deleteOrgId=e.grmtOrgId,this.deleteOrgDialogVisible=!0},deleteOrg:function(){var e=this,t={grmtOrgId:this.deleteOrgId};this.$httpExt().post(\"overallPlanning/deleteOrg\",t).then(function(t){var r=t.result;null!=r&&void 0!=r&&(e.$message({message:\"删除成功\",type:\"success\"}),e.deleteOrgDialogVisible=!1,e.searchKey=\"\",e.getOrgList())}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},orgTypeFormat:function(e,t){for(var r=this.$dicTool().getListKeyName(\"grmt_setting.roleType\"),s=0;s<r.length;s++){var o=r[s];if(e.projectOrgType==o.dicKey)return o.dicName}},getPersonList:function(e){var t=this,r={searchKey:e,PageModel:{currentPage:1,pageSize:6}};this.$httpExt().post(\"/overallPlanning/getPersonListByPage\",r).then(function(e){var r=e.result.rows;null!=r&&void 0!=r&&0!=r.length?t.selectablePersonList=r:t.selectablePersonList=[]}).catch(function(e){(0,s.default)({message:e.msg,type:\"error\"})})},selectSuperiorOrgChange:function(){this.orgInfo.superiorOrg=this.superiorOrg}}}},1880:function(e,t,r){e.exports={default:r(1881),__esModule:!0}},1881:function(e,t,r){r(302),r(165),r(167),r(1882),r(1888),r(1891),r(1893),e.exports=r(27).Map},1882:function(e,t,r){\"use strict\";var s=r(1883),o=r(1511);e.exports=r(1884)(\"Map\",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=s.getEntry(o(this,\"Map\"),e);return t&&t.v},set:function(e,t){return s.def(o(this,\"Map\"),0===e?0:e,t)}},s,!0)},1883:function(e,t,r){\"use strict\";var s=r(92).f,o=r(304),i=r(475),n=r(162),l=r(474),a=r(471),c=r(303),u=r(478),g=r(479),p=r(94),f=r(477).fastKey,d=r(1511),h=p?\"_s\":\"size\",v=function(e,t){var r,s=f(t);if(\"F\"!==s)return e._i[s];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var u=e(function(e,s){l(e,u,t,\"_i\"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=s&&a(s,r,e[c],e)});return i(u.prototype,{clear:function(){for(var e=d(this,t),r=e._i,s=e._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete r[s.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=d(this,t),s=v(r,e);if(s){var o=s.n,i=s.p;delete r._i[s.i],s.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==s&&(r._f=o),r._l==s&&(r._l=i),r[h]--}return!!s},forEach:function(e){d(this,t);for(var r,s=n(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(s(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(d(this,t),e)}}),p&&s(u.prototype,\"size\",{get:function(){return d(this,t)[h]}}),u},def:function(e,t,r){var s,o,i=v(e,t);return i?i.v=r:(e._l=i={i:o=f(t,!0),k:t,v:r,p:s=e._l,n:void 0,r:!1},e._f||(e._f=i),s&&(s.n=i),e[h]++,\"F\"!==o&&(e._i[o]=i)),e},getEntry:v,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=d(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,\"keys\"==e?t.k:\"values\"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},r?\"entries\":\"values\",!r,!0),g(t)}}},1884:function(e,t,r){\"use strict\";var s=r(37),o=r(74),i=r(477),n=r(117),l=r(95),a=r(475),c=r(471),u=r(474),g=r(93),p=r(166),f=r(92).f,d=r(1885)(0),h=r(94);e.exports=function(e,t,r,v,m,_){var b=s[e],y=b,O=m?\"set\":\"add\",I=y&&y.prototype,P={};return h&&\"function\"==typeof y&&(_||I.forEach&&!n(function(){(new y).entries().next()}))?(y=t(function(t,r){u(t,y,e,\"_c\"),t._c=new b,void 0!=r&&c(r,m,t[O],t)}),d(\"add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON\".split(\",\"),function(e){var t=\"add\"==e||\"set\"==e;e in I&&(!_||\"clear\"!=e)&&l(y.prototype,e,function(r,s){if(u(this,y,e),!t&&_&&!g(r))return\"get\"==e&&void 0;var o=this._c[e](0===r?0:r,s);return t?this:o})}),_||f(y.prototype,\"size\",{get:function(){return this._c.size}})):(y=v.getConstructor(t,e,m,O),a(y.prototype,r),i.NEED=!0),p(y,e),P[e]=y,o(o.G+o.W+o.F,P),_||v.setStrong(y,e,m),y}},1885:function(e,t,r){var s=r(162),o=r(300),i=r(204),n=r(301),l=r(1886);e.exports=function(e,t){var r=1==e,a=2==e,c=3==e,u=4==e,g=6==e,p=5==e||g,f=t||l;return function(t,l,d){for(var h,v,m=i(t),_=o(m),b=s(l,d,3),y=n(_.length),O=0,I=r?f(t,y):a?f(t,0):void 0;y>O;O++)if((p||O in _)&&(v=b(h=_[O],O,m),e))if(r)I[O]=v;else if(v)switch(e){case 3:return!0;case 5:return h;case 6:return O;case 2:I.push(h)}else if(u)return!1;return g?-1:c||u?u:I}}},1886:function(e,t,r){var s=r(1887);e.exports=function(e,t){return new(s(e))(t)}},1887:function(e,t,r){var s=r(93),o=r(480),i=r(38)(\"species\");e.exports=function(e){var t;return o(e)&&(\"function\"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),s(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},1888:function(e,t,r){var s=r(74);s(s.P+s.R,\"Map\",{toJSON:r(1889)(\"Map\")})},1889:function(e,t,r){var s=r(205),o=r(1890);e.exports=function(e){return function(){if(s(this)!=e)throw TypeError(e+\"#toJSON isn't generic\");return o(this)}}},1890:function(e,t,r){var s=r(471);e.exports=function(e,t){var r=[];return s(e,!1,r.push,r,t),r}},1891:function(e,t,r){r(1892)(\"Map\")},1892:function(e,t,r){\"use strict\";var s=r(74);e.exports=function(e){s(s.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},1893:function(e,t,r){r(1894)(\"Map\")},1894:function(e,t,r){\"use strict\";var s=r(74),o=r(164),i=r(162),n=r(471);e.exports=function(e){s(s.S,e,{from:function(e){var t,r,s,l,a=arguments[1];return o(this),(t=void 0!==a)&&o(a),void 0==e?new this:(r=[],t?(s=0,l=i(a,arguments[2],2),n(e,!1,function(e){r.push(l(e,s++))})):n(e,!1,r.push,r),new this(r))}})}},1895:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"overallPlanning\"},[r(\"div\",{staticClass:\"container\"},[e._m(0),e._v(\" \"),r(\"div\",{staticClass:\"headInfo\"},[r(\"div\",{staticClass:\"contact-btn\"},[r(\"el-row\",[r(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:function(t){return e.editSecondOrgDialog()}}},[e._v(\"添加二级组织\")])],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-search\"},[r(\"el-autocomplete\",{staticClass:\"searchInput\",attrs:{\"fetch-suggestions\":e.querySearch,placeholder:\"请输入一级组织或二级组织名称搜索\",size:\"small\",autosize:\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.searchPersonInfo(e.searchKey)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:\"searchKey\"}},[r(\"i\",{staticClass:\"el-icon-search el-input__icon\",attrs:{slot:\"suffix\"},on:{click:function(t){return e.searchPersonInfo(e.searchKey)}},slot:\"suffix\"})])],1)])]),e._v(\" \"),r(\"div\",{attrs:{id:\"personListTable\"}},[r(\"el-table\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"50px\"},attrs:{data:e.overallPlanningList,\"span-method\":e.objectSpanMethod,border:\"\"}},[r(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgType\",label:\"组织类型\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"superiorOrg\",label:\"一级组织\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgName\",label:\"二级组织\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"orgNameAbbr\",label:\"二级组织简称\"}}),e._v(\" \"),e._l(e.$dicTool().getListKeyName(\"grmt_setting.roleType\"),function(e){return r(\"el-table-column\",{attrs:{align:\"center\",prop:e.dicKey,label:e.dicName}})}),e._v(\" \"),r(\"el-table-column\",{attrs:{label:\"操作\",width:\"240\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{staticStyle:{\"margin-right\":\"10px\",\"margin-left\":\"0px\"},attrs:{size:\"small\"},on:{click:function(r){return e.editSecondOrgDialog(t.row)}}},[e._v(\"编辑组织\\n          \")]),e._v(\" \"),r(\"el-button\",{attrs:{size:\"small\"},on:{click:function(r){return e.deleteSecondOrgDialog(t.row)}}},[e._v(\"删除组织\")]),e._v(\" \"),r(\"el-button\",{attrs:{size:\"small\"},on:{click:function(r){return e.addOrgPersonDialog(t.row)}}},[e._v(\"添加人员\")]),e._v(\" \"),r(\"el-button\",{attrs:{size:\"small\"},on:{click:function(r){return e.editOrgPersonDialog(t.row)}}},[e._v(\"编辑人员\")])]}}])})],2)],1),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"查看相关责任人\",visible:e.editOrgPersonDialogVisible,\"before-close\":e.resetPersonForm},on:{\"update:visible\":function(t){e.editOrgPersonDialogVisible=t}}},[[r(\"el-select\",{staticStyle:{\"margin-bottom\":\"20px\",float:\"right\"},attrs:{placeholder:\"请选择责任人类型\"},on:{change:function(t){return e.handleCommand()}},model:{value:e.selectRoleType,callback:function(t){e.selectRoleType=t},expression:\"selectRoleType\"}},[r(\"el-option\",{attrs:{value:\"all\",label:\"全部\"}},[e._v(\"全部\")]),e._v(\" \"),e._l(e.$dicTool().getListKeyName(\"grmt_setting.roleType\"),function(e){return r(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e.dicKey}})})],2)],e._v(\" \"),[r(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.personList,border:\"\"}},[r(\"el-table-column\",{attrs:{align:\"center\",prop:\"projectOrgType\",label:\"角色\",formatter:e.orgTypeFormat}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"personName\",label:\"姓名\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"personTel\",label:\"电话\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"personMail\",label:\"邮箱\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"personNum\",label:\"工号\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",prop:\"personPosition\",label:\"职位\"}}),e._v(\" \"),r(\"el-table-column\",{attrs:{align:\"center\",label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(r){return e.deletePersonDialog(t.row)}}},[e._v(\"删除\")])]}}])})],1)]],2),e._v(\" \"),r(\"el-dialog\",{attrs:{title:void 0==this.orgInfo.grmtOrgId||\"\"==this.orgInfo.grmtOrgId?\"添加二级组织\":\"编辑组织\",visible:e.editSecondOrgDialogFormVisible,width:\"35%\",\"before-close\":e.resetOrgInfoForm},on:{\"update:visible\":function(t){e.editSecondOrgDialogFormVisible=t}}},[r(\"el-form\",{ref:\"orgInfo\",attrs:{model:e.orgInfo,rules:e.rules}},[r(\"el-form-item\",{attrs:{label:\"组织类型\",\"label-width\":e.formLabelWidth,prop:\"orgType\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-select\",{staticClass:\"editOrgInput\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择组织类型\"},on:{change:e.selectOrgTypeChange},model:{value:e.orgInfo.orgType,callback:function(t){e.$set(e.orgInfo,\"orgType\",t)},expression:\"orgInfo.orgType\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.orgType\"),function(t){return r(\"el-option\",{key:t.dicKey,staticClass:\"editOrgInput\",attrs:{label:t.dicName,value:t.dicKey}},[r(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.dicKey))]),e._v(\" \"),r(\"span\",{staticStyle:{float:\"right\",color:\"#8492a6\",\"font-size\":\"13px\"}},[e._v(e._s(t.descript))])])}),1)],1)],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"所属组织\",\"label-width\":e.formLabelWidth,prop:\"superiorOrg\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-select\",{staticClass:\"editOrgInput\",attrs:{placeholder:\"请选择所属组织\"},on:{change:e.selectSuperiorOrgChange},model:{value:e.superiorOrg,callback:function(t){e.superiorOrg=t},expression:\"superiorOrg\"}},e._l(this.orgTypeList,function(e){return r(\"el-option\",{key:e.dicKey,staticClass:\"editOrgInput\",attrs:{label:e.dicName,value:e.dicName}})}),1)],1)],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"组织名称\",\"label-width\":e.formLabelWidth,prop:\"orgName\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-input\",{model:{value:e.orgInfo.orgName,callback:function(t){e.$set(e.orgInfo,\"orgName\",t)},expression:\"orgInfo.orgName\"}})],1)],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"组织简称\",\"label-width\":e.formLabelWidth}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-input\",{model:{value:e.orgInfo.orgNameAbbr,callback:function(t){e.$set(e.orgInfo,\"orgNameAbbr\",t)},expression:\"orgInfo.orgNameAbbr\"}})],1)],1)],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:e.resetOrgInfoForm}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.editSecondOrg(e.orgInfo)}}},[e._v(\"确 定\")])],1)],1),e._v(\" \"),r(\"el-dialog\",{attrs:{width:\"35%\",title:\"添加人员\",visible:e.addPersonDialogVisible,\"before-close\":e.resetForm},on:{\"update:visible\":function(t){e.addPersonDialogVisible=t}}},[r(\"div\",{staticClass:\"dialog-form\"},[r(\"el-form\",{ref:\"orgPersonInfo\",attrs:{model:e.orgPersonInfo,rules:e.rules}},[r(\"el-form-item\",{attrs:{label:\"角色\",\"label-width\":e.personFormOptionLabelWidth,prop:\"projectOrgType\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-select\",{staticClass:\"editOrgInput\",attrs:{placeholder:\"请选择角色\"},model:{value:e.orgPersonInfo.projectOrgType,callback:function(t){e.$set(e.orgPersonInfo,\"projectOrgType\",t)},expression:\"orgPersonInfo.projectOrgType\"}},e._l(this.roleTypeList,function(e){return r(\"el-option\",{key:e.dicKey,staticClass:\"editOrgInput\",attrs:{label:e.dicName,value:e.dicKey,disabled:e.disabledRoleType}})}),1)],1)],1)],1),e._v(\" \"),r(\"el-form-item\",{attrs:{label:\"人员\",\"label-width\":e.personFormOptionLabelWidth,prop:\"personInfoId\"}},[r(\"el-row\",[r(\"el-col\",{attrs:{span:18}},[r(\"el-select\",{staticClass:\"editOrgInput\",attrs:{filterable:\"\",placeholder:\"请选择人员,可输入姓名或工号搜索\",\"remote-method\":e.getPersonList,remote:\"\",\"value-key\":\"id\",clearable:\"\"},on:{change:function(t){return e.selectPersonChange(e.orgPersonInfo.personInfoId)}},model:{value:e.orgPersonInfo.personInfoId,callback:function(t){e.$set(e.orgPersonInfo,\"personInfoId\",t)},expression:\"orgPersonInfo.personInfoId\"}},e._l(e.selectablePersonList,function(t){return r(\"el-option\",{key:t.personInfoId,staticClass:\"editOrgInput\",attrs:{label:t.personName,value:t.personInfoId}},[r(\"span\",{staticStyle:{float:\"left\"}},[e._v(e._s(t.personName))]),e._v(\" \"),r(\"span\",{staticStyle:{float:\"right\",color:\"#8492a6\",\"font-size\":\"13px\"}},[e._v(e._s(t.personNum))])])}),1)],1)],1)],1)],1)],1),e._v(\" \"),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){return e.resetForm()}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.binding(e.orgPersonInfo)}}},[e._v(\"确 定\")])],1)]),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"提示\",visible:e.deletePersonDialogVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.deletePersonDialogVisible=t}}},[r(\"span\",[e._v(\"是否删除?\")]),e._v(\" \"),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.deletePersonDialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.unbindPerson()}}},[e._v(\"确 定\")])],1)]),e._v(\" \"),r(\"el-dialog\",{attrs:{title:\"提示\",visible:e.deleteOrgDialogVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.deleteOrgDialogVisible=t}}},[r(\"span\",[e._v(\"是否删除?\")]),e._v(\" \"),r(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.deleteOrgDialogVisible=!1}}},[e._v(\"取 消\")]),e._v(\" \"),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.deleteOrg()}}},[e._v(\"确 定\")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"head\"},[t(\"h3\",[this._v(\"统筹组织\")])])}]}}});","extractedComments":[]}