{"code":"webpackJsonp([6],{1297:function(e,t,o){var n=o(91)(o(1524),o(1529),function(e){o(1523)},null,null);e.exports=n.exports},1523:function(e,t){},1524:function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=s(o(137)),r=s(o(1525));function s(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Tree:r.default},data:function(){return{treeData:[],form:{moduleId:\"\",parentId:\"\",moduleName:\"\",moduleCode:\"\",moduleIcon:\"\",moduleType:\"3\",sysCode:\"\",appType:\"1\",hidden:\"N\",sort:\"\",actionUrl:\"\",moduleDesc:\"\"},control:{seen:!1,childSystem:!0,pageBtn:!0,menu:!0,save:!1},saveForm:!1,rules:{moduleName:[{required:!0,message:this.$t(\"functionListLang.moduleNameTest\"),trigger:\"blur\"},{min:2,max:15,message:this.$t(\"functionListLang.moduleNameLimit\"),trigger:\"blur\"}],moduleCode:[{required:!0,message:this.$t(\"functionListLang.moduleCharsetTest\"),trigger:\"blur\"}],hidden:[{required:!0,message:this.$t(\"functionListLang.isHideTest\"),trigger:\"change\"}],sysCode:[{required:!0,message:this.$t(\"functionListLang.moduleSysCharset\"),trigger:\"blur\"}]}}},beforeCreate:function(){var e=this;this.$httpExt().post(\"module/queryEntityList\").then(function(t){e.treeData=t.result},function(t){(0,n.default)({message:e.$t(\"functionListLang.requestFail\"),type:\"warning\"})})},computed:{functionListLang:function(){if(\"zh-CN\"==window.sessionStorage.getItem(\"lang\"))return{}}},methods:{searchTreeModule:function(){var e=this;this.$httpExt().post(\"module/queryEntityList\").then(function(t){e.treeData=t.result},function(t){(0,n.default)({message:e.$t(\"functionListLang.requestFail\"),type:\"warning\"})})},addRootLevel:function(){this.form.moduleId=\"\",this.form.parentId=\"\",this.form.moduleName=\"\",this.form.moduleCode=\"\",this.form.moduleIcon=\"\",this.form.moduleType=\"2\",this.form.sysCode=\"\",this.form.appType=\"1\",this.form.sort=\"\",this.form.actionUrl=\"\",this.form.hidden=\"N\",this.form.helpUrl=\"\",this.form.moduleDesc=\"\",this.control.seen=!0,this.control.save=!0,this.control.pageBtn=!1,this.control.menu=!1},submitForm:function(){var e=this,t=this;t.$refs.form.validate(function(o){if(!o)return!1;if(\"\"!=t.form.moduleId)var r=\"module/updateByPrimaryKey\";else r=\"module/insert\";t.$httpExt().post(r,{moduleId:t.form.moduleId,parentId:t.form.parentId,moduleName:t.form.moduleName,moduleCode:t.form.moduleCode,moduleIcon:t.form.moduleIcon,moduleType:t.form.moduleType,sysCode:t.form.sysCode,appType:t.form.appType,sort:t.form.sort,actionUrl:t.form.actionUrl,hidden:t.form.hidden,helpUrl:t.form.helpUrl,moduleDesc:t.form.moduleDesc}).then(function(o){\"ok\"==o.succ?(t.searchTreeModule(),t.$refs.form.resetFields(),t.form.moduleId=\"\",t.form.parentId=\"\",t.form.moduleIcon=\"\",t.form.moduleDesc=\"\",(0,n.default)({message:e.$t(\"functionListLang.savaSucc\"),type:\"success\"})):(0,n.default)({message:o.message,type:\"warning\"})},function(t){(0,n.default)({message:e.$t(\"functionListLang.requestFail\"),type:\"warning\"})})})},saveFormAfter:function(){this.saveForm=!1},dat:function(e){this.treeData=e,console.log(e)}}}},1525:function(e,t,o){var n=o(91)(o(1527),o(1528),function(e){o(1526)},null,null);e.exports=n.exports},1526:function(e,t){},1527:function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n,r=o(137),s=(n=r)&&n.__esModule?n:{default:n};t.default={name:\"treeMenu\",props:[\"model\",\"form\",\"data1\",\"control\"],data:function(){return{open:!1}},computed:{isFolder:function(){return this.model.children&&this.model.children.length}},mounted:function(){0==this.model.parentId&&(this.open=!0)},methods:{toggle:function(){this.isFolder&&(this.open=!this.open)},changeColor:function(){for(var e=event.currentTarget.style.backgroundColor,t=document.getElementsByClassName(\"nodeRow\"),o=0;o<t.length;o++)t[o].style.backgroundColor=\"white\",t[o].style.color=\"black\",t[o].getElementsByClassName(\"icon\")[0].style.borderColor=\" transparent transparent transparent rgb(151, 168, 190)\";\"#20A0FF\"==e?(event.currentTarget.style.backgroundColor=\"white\",event.currentTarget.style.color=\"black\",event.currentTarget.getElementsByClassName(\"icon\")[0].style.borderColor=\" transparent transparent transparent rgb(151, 168, 190)\"):(event.currentTarget.style.backgroundColor=\"#20A0FF\",event.currentTarget.style.color=\"white\",event.currentTarget.getElementsByClassName(\"icon\")[0].style.borderColor=\" transparent transparent transparent rgb(255, 255, 255)\")},searchTreeModule:function(){var e=this;this.$httpExt().post(\"module/queryEntityList\").then(function(t){e.$emit(\"data\",t.result)},function(e){(0,s.default)({message:\"服务器请求失败，请重试！\",type:\"warning\"})})},addNode:function(e,t){for(var o=this.$parent.data1?this.$parent:this;void 0==o.data1;)o=o.$parent;o.form.moduleId=\"\",o.form.parentId=e,o.control.seen=!1,o.control.save=!0,o.control.pageBtn=!0,o.control.menu=!0,o.control.childSystem=!1,o.form.moduleName=\"\",o.form.hidden=\"N\",o.form.moduleCode=\"\",o.form.moduleIcon=\"\",o.form.moduleType=\"3\",o.form.sysCode=t,o.form.appType=\"1\",o.form.sort=\"\",o.form.actionUrl=\"\",o.form.moduleDesc=\"\"},removeNode:function(e,t){for(var o=this,n=this.$parent.data1?this.$parent:this;void 0==n.data1;)n=n.$parent;this.$children.length>0?(0,s.default)({message:\"删除的模块有子模块，请先删除子模块！\",type:\"warning\"}):this.$confirm(\"你确定要删除吗？\",\"删除提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){o.$httpExt().post(\"module/deleteByPrimaryKey/\"+e).then(function(e){\"ok\"==e.succ?(n.searchTreeModule(),n.control.seen=!1,n.control.save=!0,n.control.pageBtn=!0,n.control.menu=!0,n.control.childSystem=!1,n.form.moduleName=\"\",n.form.moduleCode=\"\",n.form.moduleIcon=\"\",n.form.moduleType=\"3\",n.form.sysCode=\"\",n.form.appType=\"1\",n.form.hidden=\"N\",n.form.sort=\"\",n.form.actionUrl=\"\",n.form.moduleDesc=\"\",(0,s.default)({message:\"删除成功！\",type:\"success\"})):(0,s.default)({message:e.msg,type:\"warning\"})},function(e){(0,s.default)({message:\"服务器请求失败，请重试！\",type:\"warning\"})})}).catch(function(){(0,s.default)({message:\"已取消删除！\"})})},showNodeInfo:function(e,t){var o=this;this.$httpExt().post(\"module/queryByOne/\"+e).then(function(n){for(var r=o.$parent.form?o.$parent:o;void 0==r.form;)r=r.$parent;r.form.moduleId=e,r.form.parentId=t,r.form.moduleName=n.result.moduleName,r.form.moduleCode=n.result.moduleCode,r.form.moduleIcon=n.result.moduleIcon,r.form.moduleType=n.result.moduleType,r.form.sysCode=n.result.sysCode,r.form.appType=n.result.appType,r.form.sort=n.result.sort,r.form.hidden=n.result.hidden,r.form.actionUrl=n.result.actionUrl,r.form.moduleDesc=n.result.moduleDesc,\"2\"==r.form.moduleType?(r.control.seen=!0,r.control.save=!0,r.control.pageBtn=!1,r.control.menu=!1,r.control.childSystem=!0):(r.control.seen=!1,r.control.save=!0,r.control.pageBtn=!0,r.control.menu=!0,r.control.childSystem=!1)},function(e){(0,s.default)({message:\"服务器请求失败，请重试！\",type:\"warning\"})})}}}},1528:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"li\",{on:{click:function(t){return t.stopPropagation(),e.showNodeInfo(e.model.moduleId,e.model.parentId)}}},[o(\"div\",{staticClass:\"nodeRow\",on:{click:function(t){return e.changeColor()}}},[e._l(e.model.nodeLevel,function(e,t){return o(\"span\",{key:t,staticClass:\"block\",attrs:{model:e}})}),e._v(\" \"),o(\"span\",[e.isFolder?o(\"i\",{staticClass:\"icon\",class:[e.open?\"folder folder-open\":\"folder\"],on:{click:function(t){return t.stopPropagation(),e.toggle(t)}}}):e._e(),e._v(\" \"),e.isFolder?e._e():o(\"i\",{staticClass:\"icon\"}),e._v(\" \"),o(\"span\",{on:{click:e.toggle}},[e._v(e._s(e.model.moduleName))]),e._v(\" \"),o(\"i\",{staticClass:\"el-icon-plus\",on:{click:function(t){return t.stopPropagation(),e.addNode(e.model.moduleId,e.model.sysCode)}}}),e._v(\" \"),o(\"i\",{staticClass:\"el-icon-delete\",on:{click:function(t){return t.stopPropagation(),e.removeNode(e.model.moduleId,e.model.parentId)}}})])],2),e._v(\" \"),e.isFolder?o(\"ul\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.open,expression:\"open\"}]},e._l(e.model.children,function(e,t){return o(\"tree-menu\",{key:t,attrs:{model:e}})}),1):e._e()])},staticRenderFns:[]}},1529:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"el-row\",{staticClass:\"userList\"},[o(\"el-col\",{staticClass:\"contentLeft\",attrs:{span:10}},[o(\"div\",{staticClass:\"moduleManges\"},[o(\"label\",[e._v(e._s(e.$t(\"functionListLang.functionModule\")))]),e._v(\" \"),o(\"i\",{staticClass:\"el-icon-plus addModuleIcon\",on:{click:e.addRootLevel}})]),e._v(\" \"),o(\"div\",{staticClass:\"moduleTreeview\"},e._l(e.treeData,function(t,n){return o(\"ul\",{key:n},[o(\"tree\",{attrs:{model:t,control:e.control,form:e.form,data1:e.treeData},on:{data:e.dat}})],1)}),0)]),e._v(\" \"),o(\"el-col\",{staticClass:\"contentRight\",attrs:{span:14}},[o(\"el-form\",{ref:\"form\",attrs:{model:e.form,\"label-width\":\"100px\",rules:e.rules}},[o(\"el-form-item\",{attrs:{label:\"父节点\",hidden:\"hidden\"}},[o(\"el-input\",{staticClass:\"1\",model:{value:e.form.moduleId,callback:function(t){e.$set(e.form,\"moduleId\",t)},expression:\"form.moduleId\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"当前节点\",hidden:\"hidden\"}},[o(\"el-input\",{model:{value:e.form.parentId,callback:function(t){e.$set(e.form,\"parentId\",t)},expression:\"form.parentId\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.moduleName\"),prop:\"moduleName\"}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.moduleName\")},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,\"moduleName\",t)},expression:\"form.moduleName\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.moduleCharset\"),prop:\"moduleCode\"}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.moduleCharset\")},model:{value:e.form.moduleCode,callback:function(t){e.$set(e.form,\"moduleCode\",t)},expression:\"form.moduleCode\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.iconStyle\")}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.iconStyle\")+\"  class\"},model:{value:e.form.moduleIcon,callback:function(t){e.$set(e.form,\"moduleIcon\",t)},expression:\"form.moduleIcon\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.moduleModel\")}},[o(\"el-select\",{staticClass:\"2\",model:{value:e.form.moduleType,callback:function(t){e.$set(e.form,\"moduleType\",t)},expression:\"form.moduleType\"}},[e.control.menu?o(\"el-option\",{attrs:{label:e.$t(\"functionListLang.menuList\"),value:\"3\"}}):e._e(),e._v(\" \"),e.control.pageBtn?o(\"el-option\",{attrs:{label:e.$t(\"functionListLang.pageButton\"),value:\"4\"}}):e._e(),e._v(\" \"),e.control.childSystem?o(\"el-option\",{attrs:{label:e.$t(\"functionListLang.childSystem\"),value:\"2\"}}):e._e()],1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.isHide\"),prop:\"hidden\"}},[[o(\"el-radio\",{attrs:{label:\"N\"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,\"hidden\",t)},expression:\"form.hidden\"}},[e._v(e._s(e.$t(\"functionListLang.nHide\")))]),e._v(\" \"),o(\"el-radio\",{attrs:{label:\"Y\"},model:{value:e.form.hidden,callback:function(t){e.$set(e.form,\"hidden\",t)},expression:\"form.hidden\"}},[e._v(e._s(e.$t(\"functionListLang.hide\")))])]],2),e._v(\" \"),e.control.seen?o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.systemCharset\"),prop:\"sysCode\"}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.systemCharset\")},model:{value:e.form.sysCode,callback:function(t){e.$set(e.form,\"sysCode\",t)},expression:\"form.sysCode\"}})],1):e._e(),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.functionType\"),hidden:\"hidden\",prop:\"appType\"}},[o(\"el-select\",{attrs:{placeholder:\"====请选择====\"},model:{value:e.form.appType,callback:function(t){e.$set(e.form,\"appType\",t)},expression:\"form.appType\"}},[o(\"el-option\",{attrs:{label:\"PC WEB\",value:\"1\"}})],1)],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.sequenceNum\"),prop:\"sort\",rules:[{required:!0,message:e.$t(\"functionListLang.sequenceNumLimit\")},{type:\"number\",message:e.$t(\"functionListLang.sequenceNumType\")}]}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.sequenceNum\")},model:{value:e.form.sort,callback:function(t){e.$set(e.form,\"sort\",e._n(t))},expression:\"form.sort\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.functionUrl\")}},[o(\"el-input\",{attrs:{placeholder:e.$t(\"functionListLang.functionUrl\")},model:{value:e.form.actionUrl,callback:function(t){e.$set(e.form,\"actionUrl\",t)},expression:\"form.actionUrl\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:e.$t(\"functionListLang.description\")}},[o(\"el-input\",{attrs:{type:\"textarea\"},model:{value:e.form.moduleDesc,callback:function(t){e.$set(e.form,\"moduleDesc\",t)},expression:\"form.moduleDesc\"}})],1),e._v(\" \"),e.control.save?o(\"el-form-item\",{staticClass:\"btn_save\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(e._s(e.$t(\"functionListLang.saveModule\")))])],1):e._e()],1)],1),e._v(\" \"),o(\"el-dialog\",{attrs:{title:e.$t(\"functionListLang.saveFunctionModule\"),visible:e.saveForm},on:{\"update:visible\":function(t){e.saveForm=t}}},[o(\"div\",{staticClass:\"dialog-content\"},[e._v(\"\\n\\t\\t\\t\"+e._s(e.$t(\"functionListLang.savaSucc\"))+\"\\n\\t\\t\")]),e._v(\" \"),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{on:{click:e.saveFormAfter}},[e._v(e._s(e.$t(\"functionListLang.cancelModule\")))]),e._v(\" \"),o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveFormAfter}},[e._v(\"$t('functionListLang.submieModule')\")])],1)])],1)},staticRenderFns:[]}}});","extractedComments":[]}