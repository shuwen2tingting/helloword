{"code":"webpackJsonp([7],{1304:function(e,t,l){var s=l(91)(l(1863),l(1868),function(e){l(1862)},null,null);e.exports=s.exports},1862:function(e,t){},1863:function(e,t,l){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s,r,o=l(1864),n=(s=o)&&s.__esModule?s:{default:s};t.default=(r={created:function(){},data:function(){return{correctFlag:!0,fileNum:1,fileList:[],deleteFileId:\"\",myrules:{projectName:[{required:!0,message:\"请填写项目名称\",trigger:\"blur\"}],origin:[{required:!0,message:\"请选择项目来源\",trigger:\"change\"}],projectType:[{required:!0,message:\"请选择项目类别\",trigger:\"change\"}],metricsValue:[{required:!0,message:\"请填写衡量指标\",trigger:\"blur\"}],companyId:[{required:!0,message:\"请选择发起部门\",trigger:\"change\"}],managerPersons:[{required:!0,message:\"请选择项目责任人\",trigger:\"change\"}],followerPersons:[{required:!0,message:\"请选择项目跟进人\",trigger:\"change\"}],followCircle:[{required:!0,message:\"请选择回顾周期\",trigger:\"change\"}],beginDate:[{required:!0,message:\"请选择开始日期\",trigger:\"change\"}],endDate:[{required:!0,message:\"请选择结束日期\",trigger:\"change\"}]},orgPersonForProManager:[],orgPersonForProFollower:[],orgPersonForProSubFollower:[],subOrgListForChoose:[],orgDepartmentList:[],newPrj:{projectId:\"\",companyId:\"\",projectCode:\"\",projectName:\"\",origin:\"\",originKey:\"\",originValue:\"\",projectType:\"\",typeKey:\"\",typeValue:\"\",metricsKey:\"\",metricsValue:\"\",projectLevel:\"\",levelKey:\"\",levelValue:\"\",followCircle:\"\",followCircleKey:\"\",followCircleValue:\"\",beginDate:\"\",endDate:\"\",background:\"\",projectStatus:\"\",managerPersons:[],followerPersons:[],file:{},milestones:[]}}},mounted:function(){}},(0,n.default)(r,\"created\",function(){this.initProjectParams()}),(0,n.default)(r,\"methods\",{initProjectParams:function(){this.fileList=[],this.newPrj={projectId:\"\",companyId:\"\",projectCode:\"\",projectName:\"\",origin:\"\",originKey:\"\",originValue:\"\",projectType:\"\",typeKey:\"\",typeValue:\"\",metricsKey:\"\",metricsValue:\"\",projectLevel:\"\",levelKey:\"\",levelValue:\"\",followCircle:\"\",followCircleKey:\"\",followCircleValue:\"\",beginDate:\"\",endDate:\"\",background:\"\",projectStatus:\"\",managerPersons:[],followerPersons:[],file:{},milestones:[]},this.fetchOrgList(),this.getInitiatingDepartment()},beforeUpload:function(e){if(e.size>10485760)return this.correctFlag=!1,this.$message({message:\"上传失败，文件大小超过10M\",type:\"error\"}),!1;var t=e.name.split(\".\").slice(-1)[0],l=/(xls|xlsx|ppt|pptx|doc|docx)/;return console.log(\"zz\",t,l.test(t)),l.test(t)?void 0:(this.correctFlag=!1,this.$message({message:\"上传失败，文件格式应为xls,xlsx,ppt,pptx,doc,docx\",type:\"error\"}),this.fileList=[],!1)},beforeRemove:function(e,t){if(console.log(\"bd\",e,t),this.correctFlag)return this.deleteFileId=e.response.result.fileId,this.$confirm(\"确定移除 \"+e.name+\"？\")},deleteFile:function(e,t){var l=this;console.log(\"del\",e,t),this.correctFlag&&this.$httpExt().delete(\"/file/delete/\"+this.deleteFileId).then(function(e){l.fileList=t}).catch(function(e){console.log(e)})},uploadSuccess:function(e,t,l){this.$message({message:\"上传成功\",type:\"success\"}),this.fileList=l,console.log(\"res\",e,t,l)},exceedWarn:function(e,t,l){this.$message({message:\"最多只能上传一个文件\",type:\"error\"})},getInitiatingDepartment:function(){var e=this;this.$httpExt().post(\"gmrt/org/list\",{orgTypeList:[\"JM\",\"FL\"]}).then(function(t){null!=t.result&&void 0!=t.result&&0!=t.result.length&&(e.orgDepartmentList=[],e.orgDepartmentList=e.$extendDeepCopy(e.orgDepartmentList,t.result))}).catch(function(e){console.log(e)})},fetchOrgPerson:function(e){console.log(\"companyId\",e);var t=this;t.newPrj.managerPersons=[],t.newPrj.followerPersons=[],t.newPrj.milestones.forEach(function(e){e.subFollowers=[]});var l={projectOrgId:e};t.$httpExt().post(\"gmrt/org/person\",l).then(function(e){console.log(333),null!=e.result&&void 0!=e.result&&0!=e.result.length?(t.orgPersonForProManager=[],t.orgPersonForProFollower=[],t.orgPersonForProSubFollower=[],t.orgPersonForProManager=t.$extendDeepCopy(t.orgPersonForProManager,e.result),t.orgPersonForProFollower=t.$extendDeepCopy(t.orgPersonForProFollower,e.result),t.orgPersonForProSubFollower=t.$extendDeepCopy(t.orgPersonForProSubFollower,e.result),console.log(111,t.orgPersonForProManager),t.newPrj.milestones.forEach(function(l){l.subFollowerList=[],l.subFollowerList=t.$extendDeepCopy(l.subFollowerList,e.result)})):(t.orgPersonForProManager=[],t.orgPersonForProFollower=[],t.orgPersonForProSubFollower=[],t.newPrj.milestones.forEach(function(e){e.subFollowerList=[]}))}).catch(function(e){console.log(e)})},deleteSubItem:function(e){this.newPrj.milestones.splice(e,1)},changesubOrgListSelect:function(e,t){console.log(\"selectedOrgId\",e);var l=this,s={projectOrgId:e};l.$httpExt().post(\"gmrt/org/person\",s).then(function(s){console.log(\"gmrt/org/person\",e,s.result),null!=s.result&&void 0!=s.result&&0!=s.result.length?(l.newPrj.milestones[t].managerPersons=[],l.newPrj.milestones[t].managerPersonsList=[],l.newPrj.milestones[t].managerPersonsList=l.$extendDeepCopy(l.newPrj.milestones[t].managerPersonsList,s.result),l.newPrj.milestones[t].followerPersons=[],l.newPrj.milestones[t].followerPersonsList=[],l.newPrj.milestones[t].followerPersonsList=l.$extendDeepCopy(l.newPrj.milestones[t].followerPersonsList,s.result)):(l.newPrj.milestones[t].managerPersonsList=[],l.newPrj.milestones[t].followerPersonsList=[])}).catch(function(e){})},clickNewMilestone:function(){var e={milestoneTitle:\"\",milestoneContent:\"\",milestoneDeliverable:\"\",milestoneBeginDate:\"\",milestoneEndDate:\"\",hasUndertake:1,milestoneUndertakeOrgId:\"\",undertake:{milestoneUndertakeOrgId:\"\",milestoneUndertakeContent:\"\"},subFollowers:[],managerPersons:[],followerPersons:[],subOrgList:[],subFollowerList:[],managerPersonsList:[],followerPersonsList:[]};e.subFollowerList=this.$extendDeepCopy(e.subFollowerList,this.orgPersonForProSubFollower),e.subOrgList=this.$extendDeepCopy(e.subOrgList,this.subOrgListForChoose),this.newPrj.milestones.push(e)},fetchOrgList:function(){var e=this;e.$httpExt().post(\"gmrt/org/list\",{orgTypeList:[\"JM\",\"FL\"]}).then(function(t){null!=t.result&&void 0!=t.result&&0!=t.result.length&&(e.subOrgListForChoose=[],e.subOrgListForChoose=e.$extendDeepCopy(e.subOrgListForChoose,t.result),e.clickNewMilestone())}).catch(function(e){console.log(e)})},sendPrj:function(){var e=this,t=!1;if(this.$refs.prjRuleForm.validate(function(e){t=!!e}),t){var l=this.$extendDeepCopy(this.newPrj,l);l.originKey=this.newPrj.origin.dicKey,l.originValue=this.newPrj.origin.dicName,l.typeKey=this.newPrj.projectType.dicKey,l.typeValue=this.newPrj.projectType.dicName,l.levelKey=this.newPrj.projectLevel.dicKey,l.levelValue=this.newPrj.projectLevel.dicName,l.followCircleKey=this.newPrj.followCircle.dicKey,l.followCircleValue=this.newPrj.followCircle.dicName,console.log(this.fileList),l.file={fileId:this.fileList.length?this.fileList[0].response.result.fileId:\"\",fileType:this.fileList.length?this.fileList[0].response.result.contentType:\"\"},l.milestones.forEach(function(e){0==e.hasUndertake&&(e.undertake=null)}),this.$httpExt().post(\"project\",l).then(function(t){e.initProjectParams(),e.$confirm(\"创建成功\",\"\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"success\",center:!0}).then(function(){e.$refs.prjRuleForm.clearValidate(),e.$emit(\"page\",\"项目全景图\",e.projectId,\"详情页\")}).catch(function(){})}).catch(function(e){console.log(e)})}},onChange:function(e){this.filepath=event.target.files[0],console.log(\"发送文件成功-----\"),this.sendFile()}}),r)},1864:function(e,t,l){\"use strict\";t.__esModule=!0;var s,r=l(1865),o=(s=r)&&s.__esModule?s:{default:s};t.default=function(e,t,l){return t in e?(0,o.default)(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}},1865:function(e,t,l){e.exports={default:l(1866),__esModule:!0}},1866:function(e,t,l){l(1867);var s=l(27).Object;e.exports=function(e,t,l){return s.defineProperty(e,t,l)}},1867:function(e,t,l){var s=l(74);s(s.S+s.F*!l(94),\"Object\",{defineProperty:l(92).f})},1868:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"new-project\"},[l(\"div\",{staticClass:\"wrap\"},[e._m(0),e._v(\" \"),l(\"div\",{staticClass:\"container\"},[l(\"el-form\",{ref:\"prjRuleForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.newPrj,rules:e.myrules,\"label-width\":\"110px\",\"label-position\":\"right\"}},[l(\"div\",{staticClass:\"basic\"},[l(\"h3\",[e._v(\"基本详情\")]),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{ref:\"ruleForm\",staticClass:\"m-right\",attrs:{prop:\"projectName\",label:\"项目名称\"}},[l(\"el-input\",{staticClass:\"input-size\",staticStyle:{width:\"320px\"},attrs:{placeholder:\"请填写项目名称\"},model:{value:e.newPrj.projectName,callback:function(t){e.$set(e.newPrj,\"projectName\",t)},expression:\"newPrj.projectName\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目来源\",prop:\"origin\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目来源\"},model:{value:e.newPrj.origin,callback:function(t){e.$set(e.newPrj,\"origin\",t)},expression:\"newPrj.origin\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.origin\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目类别\",prop:\"projectType\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目类别\"},model:{value:e.newPrj.projectType,callback:function(t){e.$set(e.newPrj,\"projectType\",t)},expression:\"newPrj.projectType\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.projectType\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"衡量指标\",prop:\"metricsValue\"}},[l(\"el-input\",{staticClass:\"input-size\",staticStyle:{width:\"320px\"},attrs:{placeholder:\"请填写衡量指标\"},model:{value:e.newPrj.metricsValue,callback:function(t){e.$set(e.newPrj,\"metricsValue\",t)},expression:\"newPrj.metricsValue\"}})],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目级别\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择项目级别\"},model:{value:e.newPrj.projectLevel,callback:function(t){e.$set(e.newPrj,\"projectLevel\",t)},expression:\"newPrj.projectLevel\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.projectLevel\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"发起部门\",prop:\"companyId\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"grmtOrgId\",placeholder:\"请选择\"},on:{change:function(t){return e.fetchOrgPerson(e.newPrj.companyId)}},model:{value:e.newPrj.companyId,callback:function(t){e.$set(e.newPrj,\"companyId\",t)},expression:\"newPrj.companyId\"}},e._l(e.orgDepartmentList,function(e){return l(\"el-option\",{key:e.grmtOrgId,attrs:{label:e.orgName,value:e.grmtOrgId}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目责任人\",prop:\"managerPersons\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择发起部门\"},model:{value:e.newPrj.managerPersons,callback:function(t){e.$set(e.newPrj,\"managerPersons\",t)},expression:\"newPrj.managerPersons\"}},e._l(e.orgPersonForProManager,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"项目跟进人\",prop:\"followerPersons\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择发起部门\"},model:{value:e.newPrj.followerPersons,callback:function(t){e.$set(e.newPrj,\"followerPersons\",t)},expression:\"newPrj.followerPersons\"}},e._l(e.orgPersonForProFollower,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"起止时间\",required:\"\"}},[l(\"el-col\",{attrs:{span:10}},[l(\"el-form-item\",{attrs:{prop:\"beginDate\"}},[l(\"el-date-picker\",{staticStyle:{width:\"170px\",\"margin-left\":\"20px\"},attrs:{type:\"date\",placeholder:\"开始日期\"},model:{value:e.newPrj.beginDate,callback:function(t){e.$set(e.newPrj,\"beginDate\",t)},expression:\"newPrj.beginDate\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"line\",staticStyle:{width:\"30px\"}},[e._v(\"至\")]),e._v(\" \"),l(\"el-col\",{attrs:{span:10}},[l(\"el-form-item\",{staticClass:\"endDate\",attrs:{prop:\"endDate\"}},[l(\"el-date-picker\",{staticStyle:{width:\"170px\"},attrs:{type:\"date\",placeholder:\"结束日期\"},model:{value:e.newPrj.endDate,callback:function(t){e.$set(e.newPrj,\"endDate\",t)},expression:\"newPrj.endDate\"}})],1)],1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"回顾周期\",prop:\"followCircle\"}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"dicKey\",placeholder:\"请选择回顾周期\"},model:{value:e.newPrj.followCircle,callback:function(t){e.$set(e.newPrj,\"followCircle\",t)},expression:\"newPrj.followCircle\"}},e._l(e.$dicTool().getListKeyName(\"grmt_setting.selectMenu.followCircle\"),function(e){return l(\"el-option\",{key:e.dicKey,attrs:{label:e.dicName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-form-item\",{staticClass:\"label-margin\",attrs:{label:\"背景与目的\"}},[l(\"el-upload\",{staticClass:\"background\",attrs:{name:\"fileInput\",limit:e.fileNum,action:e.$store.state.global.url+\"file/upload\",\"before-remove\":e.beforeRemove,\"on-remove\":e.deleteFile,\"file-list\":e.fileList,\"on-success\":e.uploadSuccess,\"on-exceed\":e.exceedWarn,\"before-upload\":e.beforeUpload}},[l(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"点击上传\")]),e._v(\" \"),l(\"div\",{staticClass:\"el-upload__tip\",attrs:{slot:\"tip\"},slot:\"tip\"},[e._v(\"上传附件必须为word、excell格式文件，且大小不超过10M\")])],1),e._v(\" \"),l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{resize:\"none\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:e.newPrj.background,callback:function(t){e.$set(e.newPrj,\"background\",t)},expression:\"newPrj.background\"}})],1)],1)],1),e._v(\" \"),l(\"div\",{staticClass:\"milestone\"},[l(\"h3\",[e._v(\"子事项\")]),e._v(\" \"),e._l(e.newPrj.milestones,function(t,s){return l(\"div\",{key:s},[s?l(\"el-row\",[l(\"div\",{staticClass:\"seperaterLine\"})]):e._e(),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{staticStyle:{\"font-weight\":\"bold\"},attrs:{label:\"子事项\"+(s+1),prop:\"milestones.\"+s+\".milestoneTitle\",rules:{required:!0,message:\"请填写子事项名称\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"input-size\",attrs:{placeholder:\"请填写子事项名称\"},model:{value:t.milestoneTitle,callback:function(l){e.$set(t,\"milestoneTitle\",l)},expression:\"milestone.milestoneTitle\"}})],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"起止时间\",required:\"\"}},[l(\"el-col\",{attrs:{span:12}},[l(\"el-form-item\",{attrs:{prop:\"milestones.\"+s+\".milestoneBeginDate\",rules:{required:!0,message:\"请选择开始日期\",trigger:\"change\"}}},[l(\"el-date-picker\",{staticClass:\"label-time\",attrs:{type:\"date\",placeholder:\"开始日期\"},model:{value:t.milestoneBeginDate,callback:function(l){e.$set(t,\"milestoneBeginDate\",l)},expression:\"milestone.milestoneBeginDate\"}})],1)],1),e._v(\" \"),l(\"el-col\",{attrs:{span:12}},[l(\"el-form-item\",{attrs:{prop:\"milestones.\"+s+\".milestoneEndDate\",rules:{required:!0,message:\"请选择结束日期\",trigger:\"change\"}}},[l(\"el-date-picker\",{staticStyle:{width:\"80%\"},attrs:{type:\"date\",placeholder:\"结束日期\"},model:{value:t.milestoneEndDate,callback:function(l){e.$set(t,\"milestoneEndDate\",l)},expression:\"milestone.milestoneEndDate\"}})],1)],1)],1)],1),e._v(\" \"),l(\"el-col\",{attrs:{span:2}},[l(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.newPrj.milestones.length>1,expression:\"newPrj.milestones.length>1\"}],attrs:{type:\"danger\"},on:{click:function(t){return e.deleteSubItem(s)}}},[e._v(\"删除\")])],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"交付物\",prop:\"milestones.\"+s+\".milestoneDeliverable\",rules:{required:!0,message:\"请填写交付物\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"input-size\",attrs:{placeholder:\"请填写交付物\"},model:{value:t.milestoneDeliverable,callback:function(l){e.$set(t,\"milestoneDeliverable\",l)},expression:\"milestone.milestoneDeliverable\"}})],1)],1)]),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"子事项跟进人\",prop:\"milestones.\"+s+\".subFollowers\",rules:{required:!0,message:\"请选择子事项跟进人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择发起部门\"},model:{value:t.subFollowers,callback:function(l){e.$set(t,\"subFollowers\",l)},expression:\"milestone.subFollowers\"}},e._l(t.subFollowerList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)])],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin errortip\"},[l(\"el-form-item\",{staticClass:\"errortip\",attrs:{label:\"子事项\",prop:\"milestones.\"+s+\".milestoneContent\",rules:{required:!0,message:\"请输入内容\",trigger:\"blur\"},\"inline-message\":\"false0\"}},[l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:t.milestoneContent,callback:function(l){e.$set(t,\"milestoneContent\",l)},expression:\"milestone.milestoneContent\"}})],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"div\",{staticClass:\"grid-content bg-purple\"},[l(\"el-form-item\",{attrs:{label:\"是否有承接部门\"}},[l(\"el-radio-group\",{staticStyle:{\"margin-left\":\"20px\"},model:{value:t.hasUndertake,callback:function(l){e.$set(t,\"hasUndertake\",l)},expression:\"milestone.hasUndertake\"}},[l(\"el-radio\",{attrs:{label:1}},[e._v(\"是\")]),e._v(\" \"),l(\"el-radio\",{attrs:{label:0}},[e._v(\"否\")])],1)],1)],1)]),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[\"1\"==t.hasUndertake?l(\"div\",{staticClass:\"grid-content bg-purple-light\"},[l(\"el-form-item\",{attrs:{label:\"承接部门\",prop:\"milestones.\"+s+\".undertake.milestoneUndertakeOrgId\",rules:{required:!0,message:\"请选择承接部门\",trigger:\"change\"}}},[l(\"el-select\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{placeholder:\"请选择\"},on:{change:function(l){return e.changesubOrgListSelect(t.undertake.milestoneUndertakeOrgId,s)}},model:{value:t.undertake.milestoneUndertakeOrgId,callback:function(l){e.$set(t.undertake,\"milestoneUndertakeOrgId\",l)},expression:\"milestone.undertake['milestoneUndertakeOrgId']\"}},e._l(t.subOrgList,function(e,t){return l(\"el-option\",{key:t,attrs:{label:e.orgName,value:e.grmtOrgId}})}),1)],1)],1):e._e()])],1),e._v(\" \"),\"1\"==t.hasUndertake?l(\"div\",[l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{attrs:{label:\"承接方责任人\",prop:\"milestones.\"+s+\".managerPersons\",rules:{required:!0,message:\"请选择承接方责任人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择承接部门\"},model:{value:t.managerPersons,callback:function(l){e.$set(t,\"managerPersons\",l)},expression:\"milestone.managerPersons\"}},e._l(t.managerPersonsList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1),e._v(\" \"),l(\"el-col\",{staticClass:\"label-margin\",attrs:{span:8}},[l(\"el-form-item\",{staticClass:\"len\",attrs:{label:\"承接方跟进人\",prop:\"milestones.\"+s+\".followerPersons\",rules:{required:!0,message:\"请选择承接方跟进人\",trigger:\"change\"}}},[l(\"el-select\",{staticClass:\"sel\",attrs:{\"value-key\":\"personNum\",multiple:\"\",placeholder:\"请先选择承接部门\"},model:{value:t.followerPersons,callback:function(l){e.$set(t,\"followerPersons\",l)},expression:\"milestone.followerPersons\"}},e._l(t.followerPersonsList,function(e){return l(\"el-option\",{key:e.personNum,attrs:{label:e.personName,value:e}})}),1)],1)],1)],1),e._v(\" \"),l(\"el-row\",[l(\"el-col\",{staticClass:\"label-margin\"},[l(\"el-form-item\",{staticClass:\"errortip\",attrs:{label:\"承接事项\",prop:\"milestones.\"+s+\".undertake.milestoneUndertakeContent\",rules:{required:!0,message:\"请输入内容\",trigger:\"blur\"}}},[l(\"el-input\",{staticClass:\"b-textarea\",staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:t.undertake.milestoneUndertakeContent,callback:function(l){e.$set(t.undertake,\"milestoneUndertakeContent\",l)},expression:\"milestone.undertake.milestoneUndertakeContent\"}})],1)],1)],1)],1):e._e()],1)}),e._v(\" \"),l(\"div\",{staticClass:\"m-add\"},[l(\"el-button\",{staticClass:\"m-button\",attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:e.clickNewMilestone}},[e._v(\"添加新子事项\")])],1)],2),e._v(\" \"),l(\"el-form-item\",{staticStyle:{\"text-align\":\"center\"}},[l(\"el-button\",{staticClass:\"n-button\",attrs:{type:\"primary\"},on:{click:e.sendPrj}},[e._v(\"创建\")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"p-link\"},[t(\"span\",[this._v(\"我的项目\")]),this._v(\" \"),t(\"span\",[this._v(\">\")]),this._v(\" \"),t(\"span\",{staticClass:\"link-text\"},[this._v(\"新建重点项目\")])])}]}}});","extractedComments":[]}